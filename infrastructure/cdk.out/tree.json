{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.220.0"},"children":{"LeadMagnetDatabaseStack":{"id":"LeadMagnetDatabaseStack","path":"LeadMagnetDatabaseStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.220.0"},"children":{"WorkflowsTable":{"id":"WorkflowsTable","path":"LeadMagnetDatabaseStack/WorkflowsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/WorkflowsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"workflow_id","attributeType":"S"},{"attributeName":"tenant_id","attributeType":"S"},{"attributeName":"status","attributeType":"S"},{"attributeName":"form_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi_tenant_status","keySchema":[{"attributeName":"tenant_id","keyType":"HASH"},{"attributeName":"status","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"gsi_form_id","keySchema":[{"attributeName":"form_id","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"workflow_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-workflows"}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/WorkflowsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"FormsTable":{"id":"FormsTable","path":"LeadMagnetDatabaseStack/FormsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/FormsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"form_id","attributeType":"S"},{"attributeName":"tenant_id","attributeType":"S"},{"attributeName":"public_slug","attributeType":"S"},{"attributeName":"workflow_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi_tenant_id","keySchema":[{"attributeName":"tenant_id","keyType":"HASH"}],"projection":{"projectionType":"ALL"}},{"indexName":"gsi_public_slug","keySchema":[{"attributeName":"public_slug","keyType":"HASH"}],"projection":{"projectionType":"ALL"}},{"indexName":"gsi_workflow_id","keySchema":[{"attributeName":"workflow_id","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"form_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-forms"}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/FormsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"SubmissionsTable":{"id":"SubmissionsTable","path":"LeadMagnetDatabaseStack/SubmissionsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/SubmissionsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"submission_id","attributeType":"S"},{"attributeName":"form_id","attributeType":"S"},{"attributeName":"created_at","attributeType":"S"},{"attributeName":"tenant_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi_form_created","keySchema":[{"attributeName":"form_id","keyType":"HASH"},{"attributeName":"created_at","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"gsi_tenant_created","keySchema":[{"attributeName":"tenant_id","keyType":"HASH"},{"attributeName":"created_at","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"submission_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-submissions","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/SubmissionsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"JobsTable":{"id":"JobsTable","path":"LeadMagnetDatabaseStack/JobsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/JobsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"job_id","attributeType":"S"},{"attributeName":"workflow_id","attributeType":"S"},{"attributeName":"status","attributeType":"S"},{"attributeName":"tenant_id","attributeType":"S"},{"attributeName":"created_at","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi_workflow_status","keySchema":[{"attributeName":"workflow_id","keyType":"HASH"},{"attributeName":"status","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"gsi_tenant_created","keySchema":[{"attributeName":"tenant_id","keyType":"HASH"},{"attributeName":"created_at","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"job_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-jobs"}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/JobsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"ArtifactsTable":{"id":"ArtifactsTable","path":"LeadMagnetDatabaseStack/ArtifactsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/ArtifactsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"artifact_id","attributeType":"S"},{"attributeName":"job_id","attributeType":"S"},{"attributeName":"tenant_id","attributeType":"S"},{"attributeName":"artifact_type","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi_job_id","keySchema":[{"attributeName":"job_id","keyType":"HASH"}],"projection":{"projectionType":"ALL"}},{"indexName":"gsi_tenant_type","keySchema":[{"attributeName":"tenant_id","keyType":"HASH"},{"attributeName":"artifact_type","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"artifact_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-artifacts"}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/ArtifactsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"TemplatesTable":{"id":"TemplatesTable","path":"LeadMagnetDatabaseStack/TemplatesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/TemplatesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"template_id","attributeType":"S"},{"attributeName":"version","attributeType":"N"},{"attributeName":"tenant_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi_tenant_id","keySchema":[{"attributeName":"tenant_id","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"template_id","keyType":"HASH"},{"attributeName":"version","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-templates"}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/TemplatesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"UserSettingsTable":{"id":"UserSettingsTable","path":"LeadMagnetDatabaseStack/UserSettingsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/UserSettingsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"tenant_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"tenant_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-user-settings"}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/UserSettingsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"UsageRecordsTable":{"id":"UsageRecordsTable","path":"LeadMagnetDatabaseStack/UsageRecordsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.220.0","metadata":[]}},"NotificationsTable":{"id":"NotificationsTable","path":"LeadMagnetDatabaseStack/NotificationsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/NotificationsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"notification_id","attributeType":"S"},{"attributeName":"tenant_id","attributeType":"S"},{"attributeName":"created_at","attributeType":"S"},{"attributeName":"read_at","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi_tenant_created","keySchema":[{"attributeName":"tenant_id","keyType":"HASH"},{"attributeName":"created_at","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"gsi_tenant_read","keySchema":[{"attributeName":"tenant_id","keyType":"HASH"},{"attributeName":"read_at","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"notification_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-notifications","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/NotificationsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"UsersTable":{"id":"UsersTable","path":"LeadMagnetDatabaseStack/UsersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/UsersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"customer_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi_customer_id","keySchema":[{"attributeName":"customer_id","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-users"}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/UsersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"CustomersTable":{"id":"CustomersTable","path":"LeadMagnetDatabaseStack/CustomersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/CustomersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"customer_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"customer_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-customers"}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/CustomersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"FilesTable":{"id":"FilesTable","path":"LeadMagnetDatabaseStack/FilesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/FilesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"file_id","attributeType":"S"},{"attributeName":"customer_id","attributeType":"S"},{"attributeName":"created_at","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi_customer_id","keySchema":[{"attributeName":"customer_id","keyType":"HASH"},{"attributeName":"created_at","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"file_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-files"}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/FilesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"ImpersonationLogsTable":{"id":"ImpersonationLogsTable","path":"LeadMagnetDatabaseStack/ImpersonationLogsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/ImpersonationLogsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"log_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"log_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-impersonation-logs"}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/ImpersonationLogsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"SessionsTable":{"id":"SessionsTable","path":"LeadMagnetDatabaseStack/SessionsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/SessionsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"session_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"session_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-sessions","timeToLiveSpecification":{"attributeName":"expires_at","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/SessionsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"FoldersTable":{"id":"FoldersTable","path":"LeadMagnetDatabaseStack/FoldersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetDatabaseStack/FoldersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"folder_id","attributeType":"S"},{"attributeName":"tenant_id","attributeType":"S"},{"attributeName":"created_at","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi_tenant_created","keySchema":[{"attributeName":"tenant_id","keyType":"HASH"},{"attributeName":"created_at","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"folder_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"leadmagnet-folders"}}},"ScalingRole":{"id":"ScalingRole","path":"LeadMagnetDatabaseStack/FoldersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"WorkflowsTableName":{"id":"WorkflowsTableName","path":"LeadMagnetDatabaseStack/WorkflowsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"FormsTableName":{"id":"FormsTableName","path":"LeadMagnetDatabaseStack/FormsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"JobsTableName":{"id":"JobsTableName","path":"LeadMagnetDatabaseStack/JobsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"LeadMagnetDatabaseStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"LeadMagnetDatabaseStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.220.0"}}}},"Exports":{"id":"Exports","path":"LeadMagnetDatabaseStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Fn::GetAtt\":[\"FoldersTableD1BB987C\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"FoldersTableD1BB987C\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"FoldersTableD1BB987C\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"WorkflowsTable4E215008\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"WorkflowsTable4E215008\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"WorkflowsTable4E215008\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"FormsTable9C91E1CF\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"FormsTable9C91E1CF\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"FormsTable9C91E1CF\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"SubmissionsTable75718D3D\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"SubmissionsTable75718D3D\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"SubmissionsTable75718D3D\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"JobsTable1970BC16\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"JobsTable1970BC16\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"JobsTable1970BC16\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"ArtifactsTable22794241\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ArtifactsTable22794241\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"ArtifactsTable22794241\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"TemplatesTable3F253039\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"TemplatesTable3F253039\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"TemplatesTable3F253039\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"NotificationsTable76DCFC6C\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"NotificationsTable76DCFC6C\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"NotificationsTable76DCFC6C\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"UsersTable9725E9C8\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"UsersTable9725E9C8\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"UsersTable9725E9C8\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"FilesTable1399FAA4\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"FilesTable1399FAA4\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"FilesTable1399FAA4\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"UserSettingsTable755385E4\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"UserSettingsTable755385E4\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"UserSettingsTable755385E4\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"CustomersTableB554B793\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"CustomersTableB554B793\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"CustomersTableB554B793\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"ImpersonationLogsTableBD29E063\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ImpersonationLogsTableBD29E063\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"ImpersonationLogsTableBD29E063\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"SessionsTable7C302024\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"SessionsTable7C302024\",\"Arn\"]}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"SessionsTable7C302024\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"WorkflowsTable4E215008\"}":{"id":"Output{\"Ref\":\"WorkflowsTable4E215008\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"WorkflowsTable4E215008\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"FormsTable9C91E1CF\"}":{"id":"Output{\"Ref\":\"FormsTable9C91E1CF\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"FormsTable9C91E1CF\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"SubmissionsTable75718D3D\"}":{"id":"Output{\"Ref\":\"SubmissionsTable75718D3D\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"SubmissionsTable75718D3D\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"JobsTable1970BC16\"}":{"id":"Output{\"Ref\":\"JobsTable1970BC16\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"JobsTable1970BC16\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"ArtifactsTable22794241\"}":{"id":"Output{\"Ref\":\"ArtifactsTable22794241\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"ArtifactsTable22794241\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"TemplatesTable3F253039\"}":{"id":"Output{\"Ref\":\"TemplatesTable3F253039\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"TemplatesTable3F253039\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"UserSettingsTable755385E4\"}":{"id":"Output{\"Ref\":\"UserSettingsTable755385E4\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"UserSettingsTable755385E4\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"NotificationsTable76DCFC6C\"}":{"id":"Output{\"Ref\":\"NotificationsTable76DCFC6C\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"NotificationsTable76DCFC6C\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"UsersTable9725E9C8\"}":{"id":"Output{\"Ref\":\"UsersTable9725E9C8\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"UsersTable9725E9C8\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"CustomersTableB554B793\"}":{"id":"Output{\"Ref\":\"CustomersTableB554B793\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"CustomersTableB554B793\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"FilesTable1399FAA4\"}":{"id":"Output{\"Ref\":\"FilesTable1399FAA4\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"FilesTable1399FAA4\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"ImpersonationLogsTableBD29E063\"}":{"id":"Output{\"Ref\":\"ImpersonationLogsTableBD29E063\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"ImpersonationLogsTableBD29E063\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"SessionsTable7C302024\"}":{"id":"Output{\"Ref\":\"SessionsTable7C302024\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"SessionsTable7C302024\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"FoldersTableD1BB987C\"}":{"id":"Output{\"Ref\":\"FoldersTableD1BB987C\"}","path":"LeadMagnetDatabaseStack/Exports/Output{\"Ref\":\"FoldersTableD1BB987C\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"LeadMagnetDatabaseStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.220.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"LeadMagnetDatabaseStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.220.0"}}}},"LeadMagnetAuthStack":{"id":"LeadMagnetAuthStack","path":"LeadMagnetAuthStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.220.0"},"children":{"AutoConfirmLambda":{"id":"AutoConfirmLambda","path":"LeadMagnetAuthStack/AutoConfirmLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.220.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"LeadMagnetAuthStack/AutoConfirmLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.220.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"LeadMagnetAuthStack/AutoConfirmLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Resource":{"id":"Resource","path":"LeadMagnetAuthStack/AutoConfirmLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Code":{"id":"Code","path":"LeadMagnetAuthStack/AutoConfirmLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.220.0"},"children":{"Stage":{"id":"Stage","path":"LeadMagnetAuthStack/AutoConfirmLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.220.0"}},"AssetBucket":{"id":"AssetBucket","path":"LeadMagnetAuthStack/AutoConfirmLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.220.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"LeadMagnetAuthStack/AutoConfirmLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112574622-us-east-1","s3Key":"0961fdf7099f704bba59eb78b48befd7bb2afb3a4689ab12becf90e19df7e168.zip"},"handler":"index.handler","role":{"Fn::GetAtt":["AutoConfirmLambdaServiceRole1FFE11EF","Arn"]},"runtime":"nodejs20.x"}}}}},"PostConfirmationLambda":{"id":"PostConfirmationLambda","path":"LeadMagnetAuthStack/PostConfirmationLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.220.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"LeadMagnetAuthStack/PostConfirmationLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.220.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"LeadMagnetAuthStack/PostConfirmationLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Resource":{"id":"Resource","path":"LeadMagnetAuthStack/PostConfirmationLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"LeadMagnetAuthStack/PostConfirmationLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetAuthStack/PostConfirmationLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"cognito-idp:AdminUpdateUserAttributes","Effect":"Allow","Resource":"arn:aws:cognito-idp:us-east-1:471112574622:userpool/*"},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-east-1:471112574622:table/leadmagnet-customers","arn:aws:dynamodb:us-east-1:471112574622:table/leadmagnet-users",{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"PostConfirmationLambdaServiceRoleDefaultPolicy5EC3124B","roles":[{"Ref":"PostConfirmationLambdaServiceRole80A1DAC4"}]}}}}}}},"Code":{"id":"Code","path":"LeadMagnetAuthStack/PostConfirmationLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.220.0"},"children":{"Stage":{"id":"Stage","path":"LeadMagnetAuthStack/PostConfirmationLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.220.0"}},"AssetBucket":{"id":"AssetBucket","path":"LeadMagnetAuthStack/PostConfirmationLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.220.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"LeadMagnetAuthStack/PostConfirmationLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112574622-us-east-1","s3Key":"0961fdf7099f704bba59eb78b48befd7bb2afb3a4689ab12becf90e19df7e168.zip"},"environment":{"variables":{"USERS_TABLE":"leadmagnet-users","CUSTOMERS_TABLE":"leadmagnet-customers"}},"handler":"postConfirmation.handler","role":{"Fn::GetAtt":["PostConfirmationLambdaServiceRole80A1DAC4","Arn"]},"runtime":"nodejs20.x"}}}}},"UserPool":{"id":"UserPool","path":"LeadMagnetAuthStack/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.220.0","metadata":[]},"children":{"PreSignUpCognito":{"id":"PreSignUpCognito","path":"LeadMagnetAuthStack/UserPool/PreSignUpCognito","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AutoConfirmLambda3FB8DE8A","Arn"]},"principal":"cognito-idp.amazonaws.com","sourceArn":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}}}},"PostConfirmationCognito":{"id":"PostConfirmationCognito","path":"LeadMagnetAuthStack/UserPool/PostConfirmationCognito","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PostConfirmationLambdaC4F60401","Arn"]},"principal":"cognito-idp.amazonaws.com","sourceArn":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}}}},"Resource":{"id":"Resource","path":"LeadMagnetAuthStack/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":[],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","lambdaConfig":{"preSignUp":{"Fn::GetAtt":["AutoConfirmLambda3FB8DE8A","Arn"]},"postConfirmation":{"Fn::GetAtt":["PostConfirmationLambdaC4F60401","Arn"]}},"policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"schema":[{"name":"email","mutable":true,"required":true},{"name":"name","mutable":true,"required":true},{"name":"tenant_id","attributeDataType":"String","mutable":false},{"name":"role","attributeDataType":"String","mutable":true},{"name":"customer_id","attributeDataType":"String","mutable":true}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"leadmagnet-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"UserPoolDomain":{"id":"UserPoolDomain","path":"LeadMagnetAuthStack/UserPool/UserPoolDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetAuthStack/UserPool/UserPoolDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"leadmagnet-471112574622","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}}}},"UsersTableRef":{"id":"UsersTableRef","path":"LeadMagnetAuthStack/UsersTableRef","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.220.0","metadata":[]}},"CustomersTableRef":{"id":"CustomersTableRef","path":"LeadMagnetAuthStack/CustomersTableRef","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.220.0","metadata":[]}},"UserPoolClient":{"id":"UserPoolClient","path":"LeadMagnetAuthStack/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetAuthStack/UserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["openid","email","profile"],"callbackUrLs":["http://localhost:3000/auth/callback","https://app.yourdomain.com/auth/callback"],"clientName":"web-app","explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":60,"logoutUrLs":["http://localhost:3000/","https://app.yourdomain.com/"],"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}},"UserPoolId":{"id":"UserPoolId","path":"LeadMagnetAuthStack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"LeadMagnetAuthStack/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"UserPoolArn":{"id":"UserPoolArn","path":"LeadMagnetAuthStack/UserPoolArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"CognitoDomain":{"id":"CognitoDomain","path":"LeadMagnetAuthStack/CognitoDomain","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"LeadMagnetAuthStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"LeadMagnetAuthStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.220.0"}}}},"Exports":{"id":"Exports","path":"LeadMagnetAuthStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"UserPoolClient2F5918F7\"}":{"id":"Output{\"Ref\":\"UserPoolClient2F5918F7\"}","path":"LeadMagnetAuthStack/Exports/Output{\"Ref\":\"UserPoolClient2F5918F7\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"UserPool6BA7E5F2\"}":{"id":"Output{\"Ref\":\"UserPool6BA7E5F2\"}","path":"LeadMagnetAuthStack/Exports/Output{\"Ref\":\"UserPool6BA7E5F2\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"LeadMagnetAuthStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.220.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"LeadMagnetAuthStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.220.0"}}}},"LeadMagnetStorageStack":{"id":"LeadMagnetStorageStack","path":"LeadMagnetStorageStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.220.0"},"children":{"ArtifactsBucket":{"id":"ArtifactsBucket","path":"LeadMagnetStorageStack/ArtifactsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetStorageStack/ArtifactsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"leadmagnet-artifacts-471112574622","corsConfiguration":{"corsRules":[{"maxAge":3600,"allowedHeaders":["*"],"allowedMethods":["GET","HEAD"],"allowedOrigins":["*"]}]},"lifecycleConfiguration":{"rules":[{"id":"transition-to-ia","status":"Enabled","transitions":[{"storageClass":"STANDARD_IA","transitionInDays":30}]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":false,"blockPublicPolicy":false,"ignorePublicAcls":false,"restrictPublicBuckets":false},"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"LeadMagnetStorageStack/ArtifactsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetStorageStack/ArtifactsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"ArtifactsBucket2AAC5544"},"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["OAIE1EFC67F","S3CanonicalUserId"]}},"Resource":[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*.png"]]},"Sid":"PublicReadGetObjectForImages_png_level0"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*/*.png"]]},"Sid":"PublicReadGetObjectForImages_png_level1"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*/*/*.png"]]},"Sid":"PublicReadGetObjectForImages_png_level2"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*.jpg"]]},"Sid":"PublicReadGetObjectForImages_jpg_level0"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*/*.jpg"]]},"Sid":"PublicReadGetObjectForImages_jpg_level1"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*/*/*.jpg"]]},"Sid":"PublicReadGetObjectForImages_jpg_level2"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*.jpeg"]]},"Sid":"PublicReadGetObjectForImages_jpeg_level0"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*/*.jpeg"]]},"Sid":"PublicReadGetObjectForImages_jpeg_level1"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*/*/*.jpeg"]]},"Sid":"PublicReadGetObjectForImages_jpeg_level2"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*.gif"]]},"Sid":"PublicReadGetObjectForImages_gif_level0"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*/*.gif"]]},"Sid":"PublicReadGetObjectForImages_gif_level1"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*/*/*.gif"]]},"Sid":"PublicReadGetObjectForImages_gif_level2"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*.webp"]]},"Sid":"PublicReadGetObjectForImages_webp_level0"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*/*.webp"]]},"Sid":"PublicReadGetObjectForImages_webp_level1"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*/*/*.webp"]]},"Sid":"PublicReadGetObjectForImages_webp_level2"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*.svg"]]},"Sid":"PublicReadGetObjectForImages_svg_level0"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*/*.svg"]]},"Sid":"PublicReadGetObjectForImages_svg_level1"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*/*/*.svg"]]},"Sid":"PublicReadGetObjectForImages_svg_level2"},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["OAIE1EFC67F","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactsBucket2AAC5544","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"OAI":{"id":"OAI","path":"LeadMagnetStorageStack/OAI","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetStorageStack/OAI/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"OAI for artifacts bucket"}}}}}},"Distribution":{"id":"Distribution","path":"LeadMagnetStorageStack/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.220.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"LeadMagnetStorageStack/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"LeadMagnetStorageStack/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["ArtifactsBucket2AAC5544","RegionalDomainName"]},"id":"LeadMagnetStorageStackDistributionOrigin16055552A","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"OAIE1EFC67F"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"LeadMagnetStorageStackDistributionOrigin16055552A","allowedMethods":["GET","HEAD","OPTIONS"],"cachedMethods":["GET","HEAD"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"comment":"Lead Magnet Artifacts CDN","customErrorResponses":[{"errorCachingMinTtl":600,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":600,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"httpVersion":"http2and3","ipv6Enabled":true,"priceClass":"PriceClass_100"}}}}}},"ArtifactsBucketName":{"id":"ArtifactsBucketName","path":"LeadMagnetStorageStack/ArtifactsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"DistributionDomainName":{"id":"DistributionDomainName","path":"LeadMagnetStorageStack/DistributionDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"DistributionId":{"id":"DistributionId","path":"LeadMagnetStorageStack/DistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"LeadMagnetStorageStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"LeadMagnetStorageStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.220.0"}}}},"Exports":{"id":"Exports","path":"LeadMagnetStorageStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Fn::GetAtt\":[\"ArtifactsBucket2AAC5544\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ArtifactsBucket2AAC5544\",\"Arn\"]}","path":"LeadMagnetStorageStack/Exports/Output{\"Fn::GetAtt\":[\"ArtifactsBucket2AAC5544\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"ArtifactsBucket2AAC5544\"}":{"id":"Output{\"Ref\":\"ArtifactsBucket2AAC5544\"}","path":"LeadMagnetStorageStack/Exports/Output{\"Ref\":\"ArtifactsBucket2AAC5544\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Fn::GetAtt\":[\"Distribution830FAC52\",\"DomainName\"]}":{"id":"Output{\"Fn::GetAtt\":[\"Distribution830FAC52\",\"DomainName\"]}","path":"LeadMagnetStorageStack/Exports/Output{\"Fn::GetAtt\":[\"Distribution830FAC52\",\"DomainName\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"LeadMagnetStorageStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.220.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"LeadMagnetStorageStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.220.0"}}}},"LeadMagnetWorkerStack":{"id":"LeadMagnetWorkerStack","path":"LeadMagnetWorkerStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.220.0"},"children":{"WorkerRepository":{"id":"WorkerRepository","path":"LeadMagnetWorkerStack/WorkerRepository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetWorkerStack/WorkerRepository/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"imageScanningConfiguration":{"scanOnPush":true},"imageTagMutability":"MUTABLE","lifecyclePolicy":{"lifecyclePolicyText":"{\"rules\":[{\"rulePriority\":1,\"description\":\"Keep last 10 images\",\"selection\":{\"tagStatus\":\"any\",\"countType\":\"imageCountMoreThan\",\"countNumber\":10},\"action\":{\"type\":\"expire\"}}]}"},"repositoryName":"leadmagnet/worker","repositoryPolicyText":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"EcrRepositoryUri":{"id":"EcrRepositoryUri","path":"LeadMagnetWorkerStack/EcrRepositoryUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"EcrRepositoryName":{"id":"EcrRepositoryName","path":"LeadMagnetWorkerStack/EcrRepositoryName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"LeadMagnetWorkerStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"LeadMagnetWorkerStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.220.0"}}}},"Exports":{"id":"Exports","path":"LeadMagnetWorkerStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Fn::GetAtt\":[\"WorkerRepository770852D6\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"WorkerRepository770852D6\",\"Arn\"]}","path":"LeadMagnetWorkerStack/Exports/Output{\"Fn::GetAtt\":[\"WorkerRepository770852D6\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Output{\"Ref\":\"WorkerRepository770852D6\"}":{"id":"Output{\"Ref\":\"WorkerRepository770852D6\"}","path":"LeadMagnetWorkerStack/Exports/Output{\"Ref\":\"WorkerRepository770852D6\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"LeadMagnetWorkerStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.220.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"LeadMagnetWorkerStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.220.0"}}}},"LeadMagnetComputeStack":{"id":"LeadMagnetComputeStack","path":"LeadMagnetComputeStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.220.0"},"children":{"JobProcessorLogGroup":{"id":"JobProcessorLogGroup","path":"LeadMagnetComputeStack/JobProcessorLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetComputeStack/JobProcessorLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/lambda/leadmagnet-job-processor","retentionInDays":7}}}}},"JobProcessorLambdaRole":{"id":"JobProcessorLambdaRole","path":"LeadMagnetComputeStack/JobProcessorLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.220.0","metadata":[]},"children":{"ImportJobProcessorLambdaRole":{"id":"ImportJobProcessorLambdaRole","path":"LeadMagnetComputeStack/JobProcessorLambdaRole/ImportJobProcessorLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Resource":{"id":"Resource","path":"LeadMagnetComputeStack/JobProcessorLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"LeadMagnetComputeStack/JobProcessorLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetComputeStack/JobProcessorLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-east-1:471112574622:table/leadmagnet-usage-records",{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttArtifactsTable22794241ArnEC6D514B"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttCustomersTableB554B793Arn983124AF"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFilesTable1399FAA4Arn25DD9DF2"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFoldersTableD1BB987CArn1A2471F0"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFormsTable9C91E1CFArnD25FB1C4"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttImpersonationLogsTableBD29E063Arn66BDDB76"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttJobsTable1970BC16ArnC40C1624"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttNotificationsTable76DCFC6CArn012EC0C4"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttSessionsTable7C302024Arn24FF8012"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttSubmissionsTable75718D3DArn8D9DD8A4"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttTemplatesTable3F253039ArnF1DF357E"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttUserSettingsTable755385E4Arn2F7CD415"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttUsersTable9725E9C8Arn5684EF99"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttWorkflowsTable4E215008Arn0D44497B"},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttArtifactsTable22794241ArnEC6D514B"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFilesTable1399FAA4Arn25DD9DF2"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFoldersTableD1BB987CArn1A2471F0"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFormsTable9C91E1CFArnD25FB1C4"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttJobsTable1970BC16ArnC40C1624"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttNotificationsTable76DCFC6CArn012EC0C4"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttSubmissionsTable75718D3DArn8D9DD8A4"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttTemplatesTable3F253039ArnF1DF357E"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttUsersTable9725E9C8Arn5684EF99"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttWorkflowsTable4E215008Arn0D44497B"},"/index/*"]]},{"Ref":"AWS::NoValue"}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"leadmagnet-storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"},"/*"]]}]},{"Action":["dynamodb:BatchWriteItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:PutItem","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-east-1:471112574622:table/leadmagnet-usage-records",{"Ref":"AWS::NoValue"}]},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":["arn:aws:secretsmanager:us-east-1:471112574622:secret:leadmagnet/openai-api-key-??????","arn:aws:secretsmanager:us-east-1:471112574622:secret:leadmagnet/twilio-credentials-??????"]}],"Version":"2012-10-17"},"policyName":"JobProcessorLambdaRoleDefaultPolicy0CFAB750","roles":[{"Ref":"JobProcessorLambdaRole863ED8A8"}]}}}}}}},"JobProcessorLambda":{"id":"JobProcessorLambda","path":"LeadMagnetComputeStack/JobProcessorLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetComputeStack/JobProcessorLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"imageUri":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::ImportValue":"leadmagnet-worker:ExportsOutputFnGetAttWorkerRepository770852D6Arn0E6C90D3"}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::ImportValue":"leadmagnet-worker:ExportsOutputFnGetAttWorkerRepository770852D6Arn0E6C90D3"}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Fn::ImportValue":"leadmagnet-worker:ExportsOutputRefWorkerRepository770852D66C2AAEBD"},":latest"]]}},"environment":{"variables":{"WORKFLOWS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefWorkflowsTable4E215008D0FFE690"},"FORMS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefFormsTable9C91E1CF5414D606"},"SUBMISSIONS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefSubmissionsTable75718D3D178CFBFC"},"JOBS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefJobsTable1970BC16EDB4A824"},"ARTIFACTS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefArtifactsTable227942413974C39D"},"TEMPLATES_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefTemplatesTable3F2530396272C7B9"},"USER_SETTINGS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefUserSettingsTable755385E409BF890F"},"USAGE_RECORDS_TABLE":"leadmagnet-usage-records","NOTIFICATIONS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefNotificationsTable76DCFC6C32DE73EE"},"USERS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefUsersTable9725E9C857961836"},"CUSTOMERS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefCustomersTableB554B793C1CB863D"},"FILES_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefFilesTable1399FAA4592580B8"},"IMPERSONATION_LOGS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefImpersonationLogsTableBD29E063DB45D8C3"},"SESSIONS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefSessionsTable7C3020246E1CCFDD"},"FOLDERS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefFoldersTableD1BB987CD11999C6"},"ARTIFACTS_BUCKET":{"Fn::ImportValue":"leadmagnet-storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"leadmagnet-storage:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"OPENAI_SECRET_NAME":"leadmagnet/openai-api-key","TWILIO_SECRET_NAME":"leadmagnet/twilio-credentials","LOG_LEVEL":"info","PLAYWRIGHT_BROWSERS_PATH":"/ms-playwright"}},"loggingConfig":{"logGroup":{"Ref":"JobProcessorLogGroup4B1EA852"}},"memorySize":3008,"packageType":"Image","role":{"Fn::GetAtt":["JobProcessorLambdaRole863ED8A8","Arn"]},"timeout":900}}}}},"Secretleadmagnetopenaiapikey":{"id":"Secretleadmagnetopenaiapikey","path":"LeadMagnetComputeStack/Secretleadmagnetopenaiapikey","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Secretleadmagnettwiliocredentials":{"id":"Secretleadmagnettwiliocredentials","path":"LeadMagnetComputeStack/Secretleadmagnettwiliocredentials","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"StateMachineRole":{"id":"StateMachineRole","path":"LeadMagnetComputeStack/StateMachineRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.220.0","metadata":[]},"children":{"ImportStateMachineRole":{"id":"ImportStateMachineRole","path":"LeadMagnetComputeStack/StateMachineRole/ImportStateMachineRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Resource":{"id":"Resource","path":"LeadMagnetComputeStack/StateMachineRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"LeadMagnetComputeStack/StateMachineRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetComputeStack/StateMachineRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-east-1:471112574622:table/leadmagnet-usage-records",{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttArtifactsTable22794241ArnEC6D514B"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttCustomersTableB554B793Arn983124AF"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFilesTable1399FAA4Arn25DD9DF2"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFoldersTableD1BB987CArn1A2471F0"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFormsTable9C91E1CFArnD25FB1C4"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttImpersonationLogsTableBD29E063Arn66BDDB76"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttJobsTable1970BC16ArnC40C1624"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttNotificationsTable76DCFC6CArn012EC0C4"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttSessionsTable7C302024Arn24FF8012"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttSubmissionsTable75718D3DArn8D9DD8A4"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttTemplatesTable3F253039ArnF1DF357E"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttUserSettingsTable755385E4Arn2F7CD415"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttUsersTable9725E9C8Arn5684EF99"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttWorkflowsTable4E215008Arn0D44497B"},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttArtifactsTable22794241ArnEC6D514B"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFilesTable1399FAA4Arn25DD9DF2"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFoldersTableD1BB987CArn1A2471F0"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFormsTable9C91E1CFArnD25FB1C4"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttJobsTable1970BC16ArnC40C1624"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttNotificationsTable76DCFC6CArn012EC0C4"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttSubmissionsTable75718D3DArn8D9DD8A4"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttTemplatesTable3F253039ArnF1DF357E"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttUsersTable9725E9C8Arn5684EF99"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttWorkflowsTable4E215008Arn0D44497B"},"/index/*"]]},{"Ref":"AWS::NoValue"}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"leadmagnet-storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"},"/*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["JobProcessorLambda4949D7F4","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["JobProcessorLambda4949D7F4","Arn"]},":*"]]}]},{"Action":"dynamodb:UpdateItem","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:dynamodb:us-east-1:471112574622:table/",{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefJobsTable1970BC16EDB4A824"}]]}},{"Action":"dynamodb:GetItem","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:dynamodb:us-east-1:471112574622:table/",{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefWorkflowsTable4E215008D0FFE690"}]]}},{"Action":["logs:CreateLogDelivery","logs:DeleteLogDelivery","logs:DescribeLogGroups","logs:DescribeResourcePolicies","logs:GetLogDelivery","logs:ListLogDeliveries","logs:PutResourcePolicy","logs:UpdateLogDelivery","xray:GetSamplingRules","xray:GetSamplingTargets","xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"StateMachineRoleDefaultPolicy433448B5","roles":[{"Ref":"StateMachineRole78EC082E"}]}}}}}}},"UpdateJobStatus":{"id":"UpdateJobStatus","path":"LeadMagnetComputeStack/UpdateJobStatus","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.DynamoUpdateItem","version":"2.220.0"}},"HandleStepFailure":{"id":"HandleStepFailure","path":"LeadMagnetComputeStack/HandleStepFailure","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.DynamoUpdateItem","version":"2.220.0"}},"HandleHtmlGenerationFailure":{"id":"HandleHtmlGenerationFailure","path":"LeadMagnetComputeStack/HandleHtmlGenerationFailure","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.DynamoUpdateItem","version":"2.220.0"}},"ParseErrorHtmlGenerationParseError":{"id":"ParseErrorHtmlGenerationParseError","path":"LeadMagnetComputeStack/ParseErrorHtmlGenerationParseError","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.220.0"}},"ParseErrorHtmlGenerationHandleException":{"id":"ParseErrorHtmlGenerationHandleException","path":"LeadMagnetComputeStack/ParseErrorHtmlGenerationHandleException","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.DynamoUpdateItem","version":"2.220.0"}},"ParseErrorStepParseError":{"id":"ParseErrorStepParseError","path":"LeadMagnetComputeStack/ParseErrorStepParseError","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.220.0"}},"ParseErrorStepHandleException":{"id":"ParseErrorStepHandleException","path":"LeadMagnetComputeStack/ParseErrorStepHandleException","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.DynamoUpdateItem","version":"2.220.0"}},"InitializeSteps":{"id":"InitializeSteps","path":"LeadMagnetComputeStack/InitializeSteps","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.DynamoGetItem","version":"2.220.0"}},"ProcessStep":{"id":"ProcessStep","path":"LeadMagnetComputeStack/ProcessStep","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.220.0"}},"ProcessHtmlGeneration":{"id":"ProcessHtmlGeneration","path":"LeadMagnetComputeStack/ProcessHtmlGeneration","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.220.0"}},"FinalizeJob":{"id":"FinalizeJob","path":"LeadMagnetComputeStack/FinalizeJob","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.DynamoUpdateItem","version":"2.220.0"}},"CheckHtmlResult":{"id":"CheckHtmlResult","path":"LeadMagnetComputeStack/CheckHtmlResult","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.220.0"}},"CheckMoreSteps":{"id":"CheckMoreSteps","path":"LeadMagnetComputeStack/CheckMoreSteps","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.220.0"}},"CheckIfHtmlNeeded":{"id":"CheckIfHtmlNeeded","path":"LeadMagnetComputeStack/CheckIfHtmlNeeded","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.220.0"}},"IncrementStep":{"id":"IncrementStep","path":"LeadMagnetComputeStack/IncrementStep","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.220.0"}},"CheckStepResult":{"id":"CheckStepResult","path":"LeadMagnetComputeStack/CheckStepResult","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.220.0"}},"ResolveDependencies":{"id":"ResolveDependencies","path":"LeadMagnetComputeStack/ResolveDependencies","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.220.0"}},"SetupStepLoop":{"id":"SetupStepLoop","path":"LeadMagnetComputeStack/SetupStepLoop","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.220.0"}},"SetHasTemplateTrue":{"id":"SetHasTemplateTrue","path":"LeadMagnetComputeStack/SetHasTemplateTrue","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.220.0"}},"SetHasTemplateFalse":{"id":"SetHasTemplateFalse","path":"LeadMagnetComputeStack/SetHasTemplateFalse","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.220.0"}},"CheckTemplateExists":{"id":"CheckTemplateExists","path":"LeadMagnetComputeStack/CheckTemplateExists","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.220.0"}},"ComputeStepsLength":{"id":"ComputeStepsLength","path":"LeadMagnetComputeStack/ComputeStepsLength","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.220.0"}},"StateMachineLogGroup":{"id":"StateMachineLogGroup","path":"LeadMagnetComputeStack/StateMachineLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetComputeStack/StateMachineLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/stepfunctions/leadmagnet-job-processor","retentionInDays":7}}}}},"JobProcessorStateMachine":{"id":"JobProcessorStateMachine","path":"LeadMagnetComputeStack/JobProcessorStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetComputeStack/JobProcessorStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"UpdateJobStatus\",\"States\":{\"UpdateJobStatus\":{\"Next\":\"InitializeSteps\",\"Type\":\"Task\",\"ResultPath\":\"$.updateResult\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::dynamodb:updateItem\",\"Parameters\":{\"Key\":{\"job_id\":{\"S.$\":\"$.job_id\"}},\"TableName\":\"",{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefJobsTable1970BC16EDB4A824"},"\",\"ExpressionAttributeNames\":{\"#status\":\"status\"},\"ExpressionAttributeValues\":{\":status\":{\"S\":\"processing\"},\":updated_at\":{\"S.$\":\"$$.State.EnteredTime\"}},\"UpdateExpression\":\"SET #status = :status, updated_at = :updated_at\"}},\"InitializeSteps\":{\"Next\":\"ComputeStepsLength\",\"Type\":\"Task\",\"ResultPath\":\"$.workflowData\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::dynamodb:getItem\",\"Parameters\":{\"Key\":{\"workflow_id\":{\"S.$\":\"$.workflow_id\"}},\"TableName\":\"",{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefWorkflowsTable4E215008D0FFE690"},"\",\"ConsistentRead\":false}},\"ComputeStepsLength\":{\"Type\":\"Pass\",\"ResultPath\":\"$\",\"Parameters\":{\"job_id.$\":\"$.job_id\",\"workflow_id.$\":\"$.workflow_id\",\"submission_id.$\":\"$.submission_id\",\"tenant_id.$\":\"$.tenant_id\",\"workflowData.$\":\"$.workflowData\",\"steps_length.$\":\"States.ArrayLength($.workflowData.Item.steps.L)\"},\"Next\":\"CheckTemplateExists\"},\"CheckTemplateExists\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.workflowData.Item.template_id.S\",\"IsPresent\":true,\"Next\":\"SetHasTemplateTrue\"}],\"Default\":\"SetHasTemplateFalse\"},\"SetHasTemplateFalse\":{\"Type\":\"Pass\",\"ResultPath\":\"$\",\"Parameters\":{\"job_id.$\":\"$.job_id\",\"workflow_id.$\":\"$.workflow_id\",\"submission_id.$\":\"$.submission_id\",\"tenant_id.$\":\"$.tenant_id\",\"workflowData.$\":\"$.workflowData\",\"steps_length.$\":\"$.steps_length\",\"has_template\":false,\"template_id\":\"\"},\"Next\":\"ResolveDependencies\"},\"ResolveDependencies\":{\"Next\":\"SetupStepLoop\",\"Type\":\"Task\",\"ResultPath\":\"$.executionPlan\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["JobProcessorLambda4949D7F4","Arn"]},"\",\"Payload\":{\"job_id.$\":\"$.job_id\",\"workflow_id.$\":\"$.workflow_id\",\"action\":\"resolve_dependencies\"}}},\"SetHasTemplateTrue\":{\"Type\":\"Pass\",\"ResultPath\":\"$\",\"Parameters\":{\"job_id.$\":\"$.job_id\",\"workflow_id.$\":\"$.workflow_id\",\"submission_id.$\":\"$.submission_id\",\"tenant_id.$\":\"$.tenant_id\",\"workflowData.$\":\"$.workflowData\",\"steps_length.$\":\"$.steps_length\",\"has_template\":true,\"template_id.$\":\"$.workflowData.Item.template_id.S\"},\"Next\":\"ResolveDependencies\"},\"SetupStepLoop\":{\"Type\":\"Pass\",\"ResultPath\":\"$\",\"Parameters\":{\"job_id.$\":\"$.job_id\",\"workflow_id.$\":\"$.workflow_id\",\"submission_id.$\":\"$.submission_id\",\"tenant_id.$\":\"$.tenant_id\",\"step_index\":0,\"total_steps.$\":\"$.steps_length\",\"has_template.$\":\"$.has_template\",\"template_id.$\":\"$.template_id\",\"execution_plan.$\":\"$.executionPlan.Payload\"},\"Next\":\"ProcessStep\"},\"ProcessStep\":{\"Next\":\"CheckStepResult\",\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"ResultPath\":\"$.error\",\"Next\":\"ParseErrorStepParseError\"}],\"Type\":\"Task\",\"ResultPath\":\"$.processResult\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["JobProcessorLambda4949D7F4","Arn"]},"\",\"Payload\":{\"job_id.$\":\"$.job_id\",\"step_index.$\":\"$.step_index\",\"step_type\":\"workflow_step\"}}},\"CheckMoreSteps\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.step_index\",\"NumericLessThanPath\":\"$.total_steps\",\"Next\":\"ProcessStep\"}],\"Default\":\"CheckIfHtmlNeeded\"},\"IncrementStep\":{\"Type\":\"Pass\",\"ResultPath\":\"$\",\"Parameters\":{\"job_id.$\":\"$.job_id\",\"workflow_id.$\":\"$.workflow_id\",\"submission_id.$\":\"$.submission_id\",\"tenant_id.$\":\"$.tenant_id\",\"step_index.$\":\"States.MathAdd($.step_index, 1)\",\"total_steps.$\":\"$.total_steps\",\"has_template.$\":\"$.has_template\",\"template_id.$\":\"$.template_id\"},\"Next\":\"CheckMoreSteps\"},\"CheckIfHtmlNeeded\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.has_template\",\"BooleanEquals\":true,\"Next\":\"ProcessHtmlGeneration\"}],\"Default\":\"FinalizeJob\"},\"FinalizeJob\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::dynamodb:updateItem\",\"Parameters\":{\"Key\":{\"job_id\":{\"S.$\":\"$.job_id\"}},\"TableName\":\"",{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefJobsTable1970BC16EDB4A824"},"\",\"ExpressionAttributeNames\":{\"#status\":\"status\"},\"ExpressionAttributeValues\":{\":status\":{\"S\":\"completed\"},\":completed_at\":{\"S.$\":\"$$.State.EnteredTime\"},\":updated_at\":{\"S.$\":\"$$.State.EnteredTime\"}},\"UpdateExpression\":\"SET #status = :status, completed_at = :completed_at, updated_at = :updated_at\"}},\"ProcessHtmlGeneration\":{\"Next\":\"CheckHtmlResult\",\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"ResultPath\":\"$.error\",\"Next\":\"ParseErrorHtmlGenerationParseError\"}],\"Type\":\"Task\",\"ResultPath\":\"$.htmlResult\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["JobProcessorLambda4949D7F4","Arn"]},"\",\"Payload\":{\"job_id.$\":\"$.job_id\",\"step_type\":\"html_generation\"}}},\"CheckHtmlResult\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.htmlResult.Payload.success\",\"BooleanEquals\":false,\"Next\":\"HandleHtmlGenerationFailure\"}],\"Default\":\"FinalizeJob\"},\"HandleHtmlGenerationFailure\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::dynamodb:updateItem\",\"Parameters\":{\"Key\":{\"job_id\":{\"S.$\":\"$.job_id\"}},\"TableName\":\"",{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefJobsTable1970BC16EDB4A824"},"\",\"ExpressionAttributeNames\":{\"#status\":\"status\"},\"ExpressionAttributeValues\":{\":status\":{\"S\":\"failed\"},\":error\":{\"S.$\":\"$.htmlResult.Payload.error\"},\":updated_at\":{\"S.$\":\"$$.State.EnteredTime\"},\":error_type\":{\"S.$\":\"$.htmlResult.Payload.error_type\"}},\"UpdateExpression\":\"SET #status = :status, error_message = :error, updated_at = :updated_at, error_type = :error_type\"}},\"ParseErrorHtmlGenerationParseError\":{\"Type\":\"Pass\",\"ResultPath\":\"$.parsedError\",\"Parameters\":{\"job_id.$\":\"$.job_id\",\"error_message.$\":\"States.Format('Lambda execution failed: {} - {}', $.error.Error, $.error.Cause)\"},\"Next\":\"ParseErrorHtmlGenerationHandleException\"},\"ParseErrorHtmlGenerationHandleException\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::dynamodb:updateItem\",\"Parameters\":{\"Key\":{\"job_id\":{\"S.$\":\"$.parsedError.job_id\"}},\"TableName\":\"",{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefJobsTable1970BC16EDB4A824"},"\",\"ExpressionAttributeNames\":{\"#status\":\"status\"},\"ExpressionAttributeValues\":{\":status\":{\"S\":\"failed\"},\":error\":{\"S.$\":\"$.parsedError.error_message\"},\":updated_at\":{\"S.$\":\"$$.State.EnteredTime\"}},\"UpdateExpression\":\"SET #status = :status, error_message = :error, updated_at = :updated_at\"}},\"CheckStepResult\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.processResult.Payload.success\",\"BooleanEquals\":false,\"Next\":\"HandleStepFailure\"}],\"Default\":\"IncrementStep\"},\"HandleStepFailure\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::dynamodb:updateItem\",\"Parameters\":{\"Key\":{\"job_id\":{\"S.$\":\"$.job_id\"}},\"TableName\":\"",{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefJobsTable1970BC16EDB4A824"},"\",\"ExpressionAttributeNames\":{\"#status\":\"status\"},\"ExpressionAttributeValues\":{\":status\":{\"S\":\"failed\"},\":error\":{\"S.$\":\"$.processResult.Payload.error\"},\":updated_at\":{\"S.$\":\"$$.State.EnteredTime\"},\":error_type\":{\"S.$\":\"$.processResult.Payload.error_type\"}},\"UpdateExpression\":\"SET #status = :status, error_message = :error, updated_at = :updated_at, error_type = :error_type\"}},\"ParseErrorStepParseError\":{\"Type\":\"Pass\",\"ResultPath\":\"$.parsedError\",\"Parameters\":{\"job_id.$\":\"$.job_id\",\"error_message.$\":\"States.Format('Lambda execution failed: {} - {}', $.error.Error, $.error.Cause)\",\"step_index.$\":\"$.step_index\"},\"Next\":\"ParseErrorStepHandleException\"},\"ParseErrorStepHandleException\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::dynamodb:updateItem\",\"Parameters\":{\"Key\":{\"job_id\":{\"S.$\":\"$.parsedError.job_id\"}},\"TableName\":\"",{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefJobsTable1970BC16EDB4A824"},"\",\"ExpressionAttributeNames\":{\"#status\":\"status\"},\"ExpressionAttributeValues\":{\":status\":{\"S\":\"failed\"},\":error\":{\"S.$\":\"$.parsedError.error_message\"},\":updated_at\":{\"S.$\":\"$$.State.EnteredTime\"}},\"UpdateExpression\":\"SET #status = :status, error_message = :error, updated_at = :updated_at\"}}}}"]]},"loggingConfiguration":{"destinations":[{"cloudWatchLogsLogGroup":{"logGroupArn":{"Fn::GetAtt":["StateMachineLogGroup15B91BCB","Arn"]}}}],"includeExecutionData":true,"level":"ALL"},"roleArn":{"Fn::GetAtt":["StateMachineRole78EC082E","Arn"]},"stateMachineName":"leadmagnet-job-processor","tracingConfiguration":{"enabled":true}}}}}},"StateMachineArn":{"id":"StateMachineArn","path":"LeadMagnetComputeStack/StateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"JobProcessorLambdaArn":{"id":"JobProcessorLambdaArn","path":"LeadMagnetComputeStack/JobProcessorLambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"LeadMagnetComputeStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"LeadMagnetComputeStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.220.0"}}}},"Exports":{"id":"Exports","path":"LeadMagnetComputeStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"JobProcessorStateMachine3E0F5560\"}":{"id":"Output{\"Ref\":\"JobProcessorStateMachine3E0F5560\"}","path":"LeadMagnetComputeStack/Exports/Output{\"Ref\":\"JobProcessorStateMachine3E0F5560\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"LeadMagnetComputeStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.220.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"LeadMagnetComputeStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.220.0"}}}},"LeadMagnetApiStack":{"id":"LeadMagnetApiStack","path":"LeadMagnetApiStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.220.0"},"children":{"ApiLambdaRole":{"id":"ApiLambdaRole","path":"LeadMagnetApiStack/ApiLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.220.0","metadata":[]},"children":{"ImportApiLambdaRole":{"id":"ImportApiLambdaRole","path":"LeadMagnetApiStack/ApiLambdaRole/ImportApiLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/ApiLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AWSXRayDaemonWriteAccess"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"LeadMagnetApiStack/ApiLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetApiStack/ApiLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-east-1:471112574622:table/leadmagnet-usage-records",{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttArtifactsTable22794241ArnEC6D514B"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttCustomersTableB554B793Arn983124AF"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFilesTable1399FAA4Arn25DD9DF2"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFoldersTableD1BB987CArn1A2471F0"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFormsTable9C91E1CFArnD25FB1C4"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttImpersonationLogsTableBD29E063Arn66BDDB76"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttJobsTable1970BC16ArnC40C1624"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttNotificationsTable76DCFC6CArn012EC0C4"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttSessionsTable7C302024Arn24FF8012"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttSubmissionsTable75718D3DArn8D9DD8A4"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttTemplatesTable3F253039ArnF1DF357E"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttUserSettingsTable755385E4Arn2F7CD415"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttUsersTable9725E9C8Arn5684EF99"},{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttWorkflowsTable4E215008Arn0D44497B"},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttArtifactsTable22794241ArnEC6D514B"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFilesTable1399FAA4Arn25DD9DF2"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFoldersTableD1BB987CArn1A2471F0"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttFormsTable9C91E1CFArnD25FB1C4"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttJobsTable1970BC16ArnC40C1624"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttNotificationsTable76DCFC6CArn012EC0C4"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttSubmissionsTable75718D3DArn8D9DD8A4"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttTemplatesTable3F253039ArnF1DF357E"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttUsersTable9725E9C8Arn5684EF99"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-database:ExportsOutputFnGetAttWorkflowsTable4E215008Arn0D44497B"},"/index/*"]]},{"Ref":"AWS::NoValue"}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"leadmagnet-storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"},{"Fn::Join":["",[{"Fn::ImportValue":"leadmagnet-storage:ExportsOutputFnGetAttArtifactsBucket2AAC5544ArnD57FAE19"},"/*"]]}]},{"Action":["states:DescribeExecution","states:StartExecution"],"Effect":"Allow","Resource":{"Fn::ImportValue":"leadmagnet-compute:ExportsOutputRefJobProcessorStateMachine3E0F55605CC28738"}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":["arn:aws:secretsmanager:us-east-1:471112574622:secret:leadmagnet/openai-api-key-??????","arn:aws:secretsmanager:us-east-1:471112574622:secret:leadmagnet/twilio-credentials-??????"]},{"Action":["lambda:InvokeFunction","xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ApiLambdaRoleDefaultPolicy84E47AF4","roles":[{"Ref":"ApiLambdaRole66D0B4CD"}]}}}}}}},"Secretleadmagnetopenaiapikey":{"id":"Secretleadmagnetopenaiapikey","path":"LeadMagnetApiStack/Secretleadmagnetopenaiapikey","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Secretleadmagnettwiliocredentials":{"id":"Secretleadmagnettwiliocredentials","path":"LeadMagnetApiStack/Secretleadmagnettwiliocredentials","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"ApiFunction":{"id":"ApiFunction","path":"LeadMagnetApiStack/ApiFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetApiStack/ApiFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n        exports.handler = async (event) => {\n          return {\n            statusCode: 200,\n            body: JSON.stringify({ message: 'API not yet deployed. Deploy backend/api first.' })\n          };\n        };\n      "},"environment":{"variables":{"WORKFLOWS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefWorkflowsTable4E215008D0FFE690"},"FORMS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefFormsTable9C91E1CF5414D606"},"SUBMISSIONS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefSubmissionsTable75718D3D178CFBFC"},"JOBS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefJobsTable1970BC16EDB4A824"},"ARTIFACTS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefArtifactsTable227942413974C39D"},"TEMPLATES_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefTemplatesTable3F2530396272C7B9"},"USER_SETTINGS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefUserSettingsTable755385E409BF890F"},"USAGE_RECORDS_TABLE":"leadmagnet-usage-records","NOTIFICATIONS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefNotificationsTable76DCFC6C32DE73EE"},"USERS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefUsersTable9725E9C857961836"},"CUSTOMERS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefCustomersTableB554B793C1CB863D"},"FILES_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefFilesTable1399FAA4592580B8"},"IMPERSONATION_LOGS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefImpersonationLogsTableBD29E063DB45D8C3"},"SESSIONS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefSessionsTable7C3020246E1CCFDD"},"FOLDERS_TABLE":{"Fn::ImportValue":"leadmagnet-database:ExportsOutputRefFoldersTableD1BB987CD11999C6"},"STEP_FUNCTIONS_ARN":{"Fn::ImportValue":"leadmagnet-compute:ExportsOutputRefJobProcessorStateMachine3E0F55605CC28738"},"ARTIFACTS_BUCKET":{"Fn::ImportValue":"leadmagnet-storage:ExportsOutputRefArtifactsBucket2AAC55442DB5E6C9"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"leadmagnet-storage:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"LAMBDA_FUNCTION_NAME":"leadmagnet-api-handler","LOG_LEVEL":"info"}},"functionName":"leadmagnet-api-handler","handler":"index.handler","memorySize":2048,"role":{"Fn::GetAtt":["ApiLambdaRole66D0B4CD","Arn"]},"runtime":"nodejs20.x","timeout":900,"tracingConfig":{"mode":"Active"}}}},"LogRetention":{"id":"LogRetention","path":"LeadMagnetApiStack/ApiFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.220.0"},"children":{"Resource":{"id":"Resource","path":"LeadMagnetApiStack/ApiFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.220.0"}}}},"LogGroup":{"id":"LogGroup","path":"LeadMagnetApiStack/ApiFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"LeadMagnetApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Code":{"id":"Code","path":"LeadMagnetApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.220.0"},"children":{"Stage":{"id":"Stage","path":"LeadMagnetApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.220.0"}},"AssetBucket":{"id":"AssetBucket","path":"LeadMagnetApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.220.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"LeadMagnetApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.220.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"LeadMagnetApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"LeadMagnetApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.220.0"}}}},"HttpApi":{"id":"HttpApi","path":"LeadMagnetApiStack/HttpApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["content-type","authorization","x-api-key","x-session-id","x-view-mode","x-selected-customer-id"],"allowMethods":["GET","POST","PUT","DELETE","PATCH","OPTIONS"],"allowOrigins":["*"],"maxAge":86400},"description":"Lead Magnet Platform API","name":"leadmagnet-api","protocolType":"HTTP"}}},"DefaultStage":{"id":"DefaultStage","path":"LeadMagnetApiStack/HttpApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"autoDeploy":true,"stageName":"$default"}}}}},"GET--v1--{proxy+}":{"id":"GET--v1--{proxy+}","path":"LeadMagnetApiStack/HttpApi/GET--v1--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration":{"id":"LambdaIntegration","path":"LeadMagnetApiStack/HttpApi/GET--v1--{proxy+}/LambdaIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/GET--v1--{proxy+}/LambdaIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"payloadFormatVersion":"2.0"}}}}},"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/GET--v1--{proxy+}/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/v1/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/GET--v1--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"NONE","routeKey":"GET /v1/{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}},"POST--v1--{proxy+}":{"id":"POST--v1--{proxy+}","path":"LeadMagnetApiStack/HttpApi/POST--v1--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/POST--v1--{proxy+}/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/v1/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/POST--v1--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"NONE","routeKey":"POST /v1/{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}},"GET--files":{"id":"GET--files","path":"LeadMagnetApiStack/HttpApi/GET--files","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/GET--files/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/files"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/GET--files/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiJwtAuthorizer14F16BDB"},"routeKey":"GET /files","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}},"JwtAuthorizer":{"id":"JwtAuthorizer","path":"LeadMagnetApiStack/HttpApi/JwtAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpAuthorizer","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/JwtAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnAuthorizer","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Authorizer","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizerType":"JWT","identitySource":["$request.header.Authorization"],"jwtConfiguration":{"audience":[{"Fn::ImportValue":"leadmagnet-auth:ExportsOutputRefUserPoolClient2F5918F753847A55"}],"issuer":{"Fn::Join":["",["https://cognito-idp.us-east-1.amazonaws.com/",{"Fn::ImportValue":"leadmagnet-auth:ExportsOutputRefUserPool6BA7E5F296FD7236"}]]}},"name":"JwtAuthorizer"}}}}},"POST--files":{"id":"POST--files","path":"LeadMagnetApiStack/HttpApi/POST--files","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/POST--files/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/files"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/POST--files/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiJwtAuthorizer14F16BDB"},"routeKey":"POST /files","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}},"GET--files--{proxy+}":{"id":"GET--files--{proxy+}","path":"LeadMagnetApiStack/HttpApi/GET--files--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/GET--files--{proxy+}/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/files/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/GET--files--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiJwtAuthorizer14F16BDB"},"routeKey":"GET /files/{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}},"POST--files--{proxy+}":{"id":"POST--files--{proxy+}","path":"LeadMagnetApiStack/HttpApi/POST--files--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/POST--files--{proxy+}/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/files/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/POST--files--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiJwtAuthorizer14F16BDB"},"routeKey":"POST /files/{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}},"DELETE--files--{proxy+}":{"id":"DELETE--files--{proxy+}","path":"LeadMagnetApiStack/HttpApi/DELETE--files--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/DELETE--files--{proxy+}/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/files/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/DELETE--files--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiJwtAuthorizer14F16BDB"},"routeKey":"DELETE /files/{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}},"GET--me":{"id":"GET--me","path":"LeadMagnetApiStack/HttpApi/GET--me","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/GET--me/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/me"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/GET--me/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiJwtAuthorizer14F16BDB"},"routeKey":"GET /me","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}},"GET--admin--{proxy+}":{"id":"GET--admin--{proxy+}","path":"LeadMagnetApiStack/HttpApi/GET--admin--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/GET--admin--{proxy+}/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/admin/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/GET--admin--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiJwtAuthorizer14F16BDB"},"routeKey":"GET /admin/{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}},"POST--admin--{proxy+}":{"id":"POST--admin--{proxy+}","path":"LeadMagnetApiStack/HttpApi/POST--admin--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/POST--admin--{proxy+}/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/admin/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/POST--admin--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiJwtAuthorizer14F16BDB"},"routeKey":"POST /admin/{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}},"PUT--admin--{proxy+}":{"id":"PUT--admin--{proxy+}","path":"LeadMagnetApiStack/HttpApi/PUT--admin--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/PUT--admin--{proxy+}/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/admin/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/PUT--admin--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiJwtAuthorizer14F16BDB"},"routeKey":"PUT /admin/{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}},"PATCH--admin--{proxy+}":{"id":"PATCH--admin--{proxy+}","path":"LeadMagnetApiStack/HttpApi/PATCH--admin--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/PATCH--admin--{proxy+}/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/admin/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/PATCH--admin--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiJwtAuthorizer14F16BDB"},"routeKey":"PATCH /admin/{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}},"DELETE--admin--{proxy+}":{"id":"DELETE--admin--{proxy+}","path":"LeadMagnetApiStack/HttpApi/DELETE--admin--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.220.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"LeadMagnetApiStack/HttpApi/DELETE--admin--{proxy+}/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112574622:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/admin/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"LeadMagnetApiStack/HttpApi/DELETE--admin--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiJwtAuthorizer14F16BDB"},"routeKey":"DELETE /admin/{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETv1proxyLambdaIntegration7BEBE125"}]]}}}}}}}},"ApiUrl":{"id":"ApiUrl","path":"LeadMagnetApiStack/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"ApiFunctionArn":{"id":"ApiFunctionArn","path":"LeadMagnetApiStack/ApiFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"LeadMagnetApiStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"LeadMagnetApiStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.220.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"LeadMagnetApiStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.220.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"LeadMagnetApiStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.220.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}