exports.id=501,exports.ids=[501],exports.modules={66281:(e,s,t)=>{Promise.resolve().then(t.bind(t,86034))},86034:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var r=t(19899),a=t(5507),n=t(76153),l=t(65041),i=t(55562),o=t(53216);let d=(0,a.createContext)(null),c=()=>{let e=(0,n.useRouter)(),s=(0,n.usePathname)(),{user:t,role:c,isLoading:x}=(0,o.a)(),[m,h]=(0,a.useState)(!1),u=(0,a.useRef)(null),b=(0,a.useContext)(d);(0,a.useEffect)(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&h(!1)};return m&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[m]);let p=x?"":t?.name||t?.email||"User",f=x?"":((e,s)=>{if(e){let s=e.split(" ");return s.length>=2?`${s[0][0]}${s[1][0]}`.toUpperCase():e[0].toUpperCase()}return s?s[0].toUpperCase():"U"})(t?.name,t?.email);return(0,r.jsxs)("div",{className:"relative",ref:u,children:[(0,r.jsxs)("button",{onClick:()=>h(!m),className:"flex items-center gap-2 rounded-2xl border border-white/60 bg-white/80 px-2.5 py-1.5 text-sm font-medium text-ink-500 shadow-soft transition hover:text-ink-900","aria-label":"User menu",children:[r.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-2xl bg-gradient-to-br from-brand-500 to-brand-600 text-white text-sm font-semibold shadow-soft",children:x?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):f}),!x&&r.jsx("span",{className:"hidden sm:block max-w-[120px] truncate text-ink-600",children:p}),r.jsx(i.bTu,{className:`hidden sm:block h-4 w-4 text-ink-300 transition-transform ${m?"rotate-180":""}`})]}),m&&(0,r.jsxs)("div",{className:"absolute right-0 z-50 mt-3 w-72 max-w-[calc(100vw-1rem)] rounded-3xl border border-white/60 bg-white/95 p-1.5 shadow-soft backdrop-blur-xl",children:[r.jsx("div",{className:"rounded-2xl border border-white/60 bg-white/90 p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-2xl bg-gradient-to-br from-brand-500 to-brand-600 text-white text-sm font-semibold shadow-soft",children:x?r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):f}),r.jsx("div",{className:"flex-1 min-w-0",children:x?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2 animate-pulse"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-32 animate-pulse"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:t?.name||"User"}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:t?.email||""})]})})]})}),(0,r.jsxs)("div",{className:"py-2",children:["/dashboard/jobs"===s&&b&&r.jsx("div",{className:"mb-2 border-b border-white/60 pb-2 sm:hidden",children:(0,r.jsxs)("div",{className:"px-4 py-2",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[r.jsx(i.Ihx,{className:"mr-2 h-4 w-4 text-ink-300"}),r.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-ink-400",children:"Filters"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"mb-1 block text-xs text-ink-500",children:"Status"}),(0,r.jsxs)("select",{value:b.statusFilter,onChange:e=>{b.setStatusFilter(e.target.value)},className:"w-full rounded-xl border border-white/60 bg-white/90 px-2 py-1.5 text-xs text-ink-600 shadow-soft focus:border-brand-200 focus:outline-none focus:ring-2 focus:ring-brand-100/80",onClick:e=>e.stopPropagation(),children:[r.jsx("option",{value:"all",children:"All Statuses"}),r.jsx("option",{value:"pending",children:"Queued"}),r.jsx("option",{value:"processing",children:"Generating"}),r.jsx("option",{value:"completed",children:"Ready"}),r.jsx("option",{value:"failed",children:"Error"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"mb-1 block text-xs text-ink-500",children:"Lead Magnet"}),(0,r.jsxs)("select",{value:b.workflowFilter,onChange:e=>{b.setWorkflowFilter(e.target.value)},className:"w-full rounded-xl border border-white/60 bg-white/90 px-2 py-1.5 text-xs text-ink-600 shadow-soft focus:border-brand-200 focus:outline-none focus:ring-2 focus:ring-brand-100/80",onClick:e=>e.stopPropagation(),children:[r.jsx("option",{value:"all",children:"All Lead Magnets"}),b.workflows.map(e=>r.jsx("option",{value:e.workflow_id,children:e.workflow_name||e.workflow_id},e.workflow_id))]})]})]})]})}),(0,r.jsxs)("button",{onClick:()=>{e.push("/dashboard/settings"),h(!1)},className:"flex w-full items-center rounded-2xl px-4 py-2.5 text-sm text-ink-600 transition hover:bg-white/80",children:[r.jsx(i.nbt,{className:"mr-3 h-4 w-4 text-ink-400"}),r.jsx("span",{children:"Settings"})]}),"SUPER_ADMIN"===c&&(0,r.jsxs)("button",{onClick:()=>{e.push("/dashboard/agency/users"),h(!1)},className:"flex w-full items-center rounded-2xl px-4 py-2.5 text-sm text-ink-600 transition hover:bg-white/80",children:[r.jsx(i.WY8,{className:"mr-3 h-4 w-4 text-ink-400"}),r.jsx("span",{children:"Agency Users"})]})]}),r.jsx("div",{className:"border-t border-white/60 py-2",children:(0,r.jsxs)("button",{onClick:()=>{(0,l.w7)(),e.push("/auth/login"),h(!1)},className:"flex w-full items-center rounded-2xl px-4 py-2.5 text-sm text-red-500 transition hover:bg-red-50/60",children:[r.jsx(i.xqh,{className:"mr-3 h-4 w-4"}),r.jsx("span",{children:"Sign Out"})]})})]})]})};var x=t(12330);function m(){let{isImpersonating:e,actingUser:s,refreshAuth:t}=(0,o.a)(),[n,l]=(0,a.useState)(!1);if(!e||!s)return r.jsx("div",{className:"min-h-[44px] sm:min-h-[40px]","aria-hidden":"true"});let i=async()=>{l(!0);try{let e=localStorage.getItem("impersonation_session_id");e&&(await x.hi.post("/admin/impersonate/reset",{sessionId:e}),localStorage.removeItem("impersonation_session_id")),await t()}catch(e){console.error("Error resetting impersonation:",e)}finally{l(!1)}};return(0,r.jsxs)("div",{className:"bg-yellow-500 text-yellow-900 px-3 sm:px-4 py-2.5 sm:py-2 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-2 sm:gap-3 min-h-[44px] sm:min-h-[40px]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[r.jsx("span",{className:"font-semibold text-sm sm:text-base whitespace-nowrap flex-shrink-0",children:"Viewing as:"}),(0,r.jsxs)("div",{className:"min-w-0 flex-1 flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[r.jsx("span",{className:"text-sm sm:text-base truncate",children:s.name||s.email}),(0,r.jsxs)("span",{className:"text-xs sm:text-sm text-yellow-800 truncate",children:["(",s.email,")"]})]})]}),r.jsx("button",{onClick:i,disabled:n,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors touch-target whitespace-nowrap flex-shrink-0",children:n?"Returning...":"Return to my account"})]})}var h=t(23332);let u=(0,a.createContext)(void 0),b=({children:e,className:s,sidebarOpen:t,onSidebarOpenChange:n})=>{let[l,i]=(0,a.useState)(!1),o="boolean"==typeof t,d=o?t:l,c=(0,a.useCallback)(e=>{o?n?.(e):i(e)},[o,n]),x=(0,a.useMemo)(()=>({sidebarOpen:d,setSidebarOpen:c}),[d,c]);return r.jsx(u.Provider,{value:x,children:(0,r.jsxs)("div",{"data-shell-root":!0,className:(0,h.Z)("relative flex min-h-screen bg-transparent text-ink-900 selection:bg-brand-100 selection:text-ink-900",s),children:[r.jsx("div",{className:"noise-overlay","aria-hidden":"true"}),e]})})},p=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useShell must be used within <Shell>");return e},f=({children:e,className:s})=>{let{sidebarOpen:t,setSidebarOpen:a}=p();return(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:(0,h.Z)("fixed inset-0 z-30 bg-overlay/60 backdrop-blur-sm transition-opacity duration-200 lg:hidden",t?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"),onClick:()=>a(!1),"aria-hidden":!t}),r.jsx("aside",{"data-shell-sidebar":!0,className:(0,h.Z)("fixed top-0 left-0 z-40 flex h-full w-full max-w-xs flex-col bg-white shadow-soft transition-transform duration-300 ease-snappy sm:max-w-sm lg:border-r lg:border-surface-200",t?"translate-x-0":"-translate-x-full","lg:translate-x-0",s),children:e})]})},w=({children:e,className:s})=>r.jsx("main",{"data-shell-content":!0,className:(0,h.Z)("shell-container shell-scroll-area relative py-6 sm:py-8 lg:py-10",s),children:e});var j=t(54175);let g=({href:e,label:s,icon:t,isActive:a,badge:n,shortcutHint:l,onClick:i})=>{let{setSidebarOpen:o}=p();return(0,r.jsxs)(j.default,{href:e,onClick:()=>{o(!1),i?.()},className:(0,h.Z)("group flex items-center gap-3 rounded-2xl px-3 py-2.5 text-sm font-medium transition-all duration-200",a?"bg-brand-50 text-ink-900 shadow-ring":"text-ink-500 hover:bg-white/60 hover:text-ink-900"),children:[r.jsx("span",{className:(0,h.Z)("flex h-9 w-9 items-center justify-center rounded-xl text-base transition-transform duration-200",a?"bg-brand-100 text-brand-600 shadow-soft":"bg-white/60 text-ink-400 group-hover:text-brand-500"),children:r.jsx(t,{className:"h-5 w-5"})}),r.jsx("span",{className:"flex-1 truncate",children:s}),null!=n&&""!==n&&r.jsx("span",{className:"pill text-xs text-ink-700",children:n}),l&&r.jsx("kbd",{className:"hidden rounded-lg border border-white/60 bg-white/70 px-2 py-1 text-xs font-medium text-ink-400 md:flex",children:l})]})};function v({children:e}){(0,n.useRouter)();let s=(0,n.usePathname)(),[t,l]=(0,a.useState)(!0),[o,d]=(0,a.useState)(!1),x=(0,a.useMemo)(()=>[{href:"/dashboard",label:"Dashboard",icon:i.m6D},{href:"/dashboard/workflows",label:"Lead Magnets",icon:i.SnF},{href:"/dashboard/jobs",label:"Runs",icon:i.bAx},{href:"/dashboard/artifacts",label:"Downloads",icon:i._hL}],[]);return t?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-gray-600",children:"Loading..."})})}):(0,r.jsxs)(b,{sidebarOpen:o,onSidebarOpenChange:d,children:[r.jsx(f,{children:(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b border-surface-200 px-4 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-2xl bg-brand-600 text-sm font-semibold text-white",children:"LM"}),r.jsx("div",{className:"min-w-0",children:r.jsx("p",{className:"text-lg font-semibold text-ink-900",children:"Lead Magnet AI"})})]}),r.jsx("button",{onClick:()=>d(!1),className:"rounded-2xl border border-surface-200 p-2 text-ink-400 transition hover:text-ink-900 lg:hidden","aria-label":"Close navigation",children:r.jsx(i.q5L,{className:"h-5 w-5"})})]}),r.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-6",children:r.jsx("div",{className:"space-y-1.5",children:x.map(e=>{let t=s===e.href||s?.startsWith(e.href+"/");return r.jsx(g,{href:e.href,label:e.label,icon:e.icon,isActive:t},e.href)})})}),r.jsx("div",{className:"border-t border-surface-200 px-4 py-4",children:r.jsx(c,{})})]})}),(0,r.jsxs)("div",{className:"flex min-h-screen flex-1 flex-col lg:pl-[20rem]",children:[r.jsx(m,{}),r.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:r.jsx("button",{onClick:()=>d(!0),className:"inline-flex h-11 w-11 items-center justify-center rounded-2xl border border-surface-200 bg-white text-ink-500 transition hover:text-ink-900 shadow-lg","aria-label":"Open menu",children:r.jsx(i.cur,{className:"h-5 w-5"})})}),r.jsx(w,{className:"w-full bg-surface-50",children:r.jsx("main",{className:"space-y-6",children:e})})]})]})}},20094:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(2772).createProxy)(String.raw`/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/layout.tsx#default`)}};