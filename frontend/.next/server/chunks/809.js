"use strict";exports.id=809,exports.ids=[809],exports.modules={71383:(e,t,s)=>{s.d(t,{E:()=>d});var r=s(19899),o=s(5507),l=s(55562),a=s(12330);function i({original:e,proposed:t,action:s,onAccept:o,onReject:a,isLoading:i=!1}){let n=e=>null==e?"(not set)":Array.isArray(e)?0===e.length?"(none)":e.map(e=>"object"==typeof e?e.type||JSON.stringify(e):e).join(", "):"string"==typeof e?""===e.trim()?"(empty)":e.length>100?e.substring(0,100)+"...":e:String(e),d=(()=>{if("add"===s)return[{field:"step_name",label:"Step Name",from:null,to:t.step_name},{field:"step_description",label:"Description",from:null,to:t.step_description},{field:"model",label:"Model",from:null,to:t.model},{field:"instructions",label:"Instructions",from:null,to:t.instructions},{field:"tools",label:"Tools",from:null,to:t.tools},{field:"tool_choice",label:"Tool Choice",from:null,to:t.tool_choice}].filter(e=>e.to);let r=[];return e?.step_name!==t.step_name&&r.push({field:"step_name",label:"Step Name",from:e?.step_name,to:t.step_name}),e?.step_description!==t.step_description&&r.push({field:"step_description",label:"Description",from:e?.step_description,to:t.step_description}),e?.model!==t.model&&r.push({field:"model",label:"Model",from:e?.model,to:t.model}),e?.instructions!==t.instructions&&r.push({field:"instructions",label:"Instructions",from:e?.instructions,to:t.instructions}),JSON.stringify(e?.tools)!==JSON.stringify(t.tools)&&r.push({field:"tools",label:"Tools",from:e?.tools,to:t.tools}),e?.tool_choice!==t.tool_choice&&r.push({field:"tool_choice",label:"Tool Choice",from:e?.tool_choice,to:t.tool_choice}),JSON.stringify(e?.depends_on)!==JSON.stringify(t.depends_on)&&r.push({field:"depends_on",label:"Dependencies",from:e?.depends_on,to:t.depends_on}),r})();return(0,r.jsxs)("div",{className:"border-2 border-primary-200 rounded-lg bg-primary-50 p-4",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-primary-900 mb-1",children:"add"===s?"✨ New Step Proposed":"✨ Changes Proposed by AI"}),r.jsx("p",{className:"text-xs text-primary-700",children:"add"===s?"Review the proposed step configuration below":`${d.length} field${1===d.length?"":"s"} will be updated`})]})}),0===d.length&&"update"===s&&r.jsx("div",{className:"text-sm text-primary-700 mb-4",children:"No changes detected"}),d.length>0&&r.jsx("div",{className:"space-y-3 mb-4",children:d.map((e,t)=>(0,r.jsxs)("div",{className:"bg-white rounded border border-primary-200 p-3",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:e.label}),"update"===s&&null!==e.from&&(0,r.jsxs)("div",{className:"flex items-start gap-2 text-sm mb-1",children:[r.jsx("span",{className:"text-red-600 font-medium min-w-[60px]",children:"Before:"}),r.jsx("span",{className:"text-red-700 bg-red-50 px-2 py-1 rounded flex-1 break-words",children:n(e.from)})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[r.jsx("span",{className:"text-green-600 font-medium min-w-[60px]",children:"add"===s?"Value:":"After:"}),r.jsx("span",{className:"text-green-700 bg-green-50 px-2 py-1 rounded flex-1 break-words",children:n(e.to)})]})]},t))}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("button",{onClick:o,disabled:i,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm transition-colors",children:[r.jsx(l.UgA,{className:"w-4 h-4"}),"add"===s?"Add This Step":"Apply Changes"]}),(0,r.jsxs)("button",{onClick:a,disabled:i,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm transition-colors",children:[r.jsx(l.q5L,{className:"w-4 h-4"}),"Reject"]})]})]})}var n=s(90832);function d({workflowId:e,step:t,stepIndex:s,onAccept:d}){let[c,u]=(0,o.useState)(""),[p,m]=(0,o.useState)(!1),{isGenerating:x,error:h,proposal:b,generateStep:g,acceptProposal:f,rejectProposal:y}=function(e){let[t,s]=(0,o.useState)(!1),[r,l]=(0,o.useState)(null),[i,n]=(0,o.useState)(null),d=async(t,r,o,i)=>{if(!e)return l("Workflow ID is required for AI generation"),null;s(!0),l(null),n(null);try{let s=await a.hi.generateStepWithAI(e,{userPrompt:t,action:i,currentStep:r,currentStepIndex:o}),l={original:r,proposed:s.step,action:s.action,step_index:s.step_index};return n(l),l}catch(e){return console.error("[useWorkflowStepAI] Generation failed",{error:e.message}),l(e.message||"Failed to generate step. Please try again."),null}finally{s(!1)}},c=async(e,t,s,r)=>await d(e,t,s,r);return{isGenerating:t,error:r,proposal:i,generateStep:d,acceptProposal:()=>(n(null),i),rejectProposal:()=>{n(null)},retry:c}}(e),j=async()=>{if(!g||!c.trim()){n.ZP.error("Please enter a prompt");return}try{await g(c,t,s,"update")}catch(e){n.ZP.error(h||"Failed to generate step configuration")}};return e?(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>m(!p),className:"w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg hover:from-purple-100 hover:to-blue-100 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(l.Wqx,{className:"w-5 h-5 text-purple-600"}),r.jsx("span",{className:"font-semibold text-purple-900",children:"AI Assist"}),r.jsx("span",{className:"text-xs text-purple-600 bg-purple-100 px-2 py-1 rounded-full",children:"Beta"})]}),p?r.jsx(l.rH8,{className:"w-5 h-5 text-purple-600"}):r.jsx(l.bTu,{className:"w-5 h-5 text-purple-600"})]}),p&&(0,r.jsxs)("div",{className:"mt-3 p-4 border border-purple-200 rounded-lg bg-white",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Describe how you want to change this step, and AI will generate an updated configuration for you to review."}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would you like to change?"}),r.jsx("textarea",{value:c,onChange:e=>u(e.target.value),placeholder:"e.g., 'Change the model to GPT-4o and add web search tool' or 'Update instructions to focus on competitive analysis'",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm",rows:3,disabled:x})]}),r.jsx("button",{type:"button",onClick:j,disabled:!c.trim()||x,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm transition-colors",children:x?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.Wqx,{className:"w-4 h-4"}),"Generate with AI"]})}),h&&r.jsx("div",{className:"text-sm text-red-600 bg-red-50 px-3 py-2 rounded border border-red-200",children:h}),b&&r.jsx("div",{className:"mt-4",children:r.jsx(i,{original:b.original,proposed:b.proposed,action:b.action,onAccept:()=>{if(!b||!f)return;let e=f();if(e){let{proposed:t}=e;d(t),u(""),n.ZP.success("AI changes applied successfully")}},onReject:()=>{y&&(y(),u(""),(0,n.ZP)("AI proposal rejected"))},isLoading:!1})})]})]})]}):null}},65684:(e,t,s)=>{s.d(t,{b:()=>l});var r=s(19899);let o=[{value:"gpt-5",label:"GPT-5"},{value:"gpt-4.1",label:"GPT-4.1"},{value:"gpt-4o",label:"GPT-4o"},{value:"gpt-4-turbo",label:"GPT-4 Turbo"},{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo"},{value:"computer-use-preview",label:"Computer Use Preview"}];function l({step:e,onChange:t}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Name *"}),r.jsx("input",{type:"text",value:e.step_name,onChange:e=>t("step_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Deep Research",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Description (optional)"}),r.jsx("textarea",{value:e.step_description||"",onChange:e=>t("step_description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Brief description of what this step does",rows:2})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Type *"}),(0,r.jsxs)("select",{value:e.step_type||"ai_generation",onChange:e=>{let s=e.target.value;t("step_type",s),"webhook"===s&&(t("webhook_data_selection",{include_submission:!0,exclude_step_indices:[],include_job_info:!0}),t("webhook_url",""),t("webhook_headers",{}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"ai_generation",children:"AI Generation"}),r.jsx("option",{value:"webhook",children:"Webhook"})]})]}),("ai_generation"===e.step_type||!e.step_type)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Model *"}),r.jsx("select",{value:e.model,onChange:e=>t("model",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:o.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions *"}),r.jsx("textarea",{value:e.instructions,onChange:e=>t("instructions",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Detailed instructions for what this step should do...",rows:6,required:!0}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"These instructions will be passed to the AI model along with context from previous steps."})]})]})]})}},95655:(e,t,s)=>{s.d(t,{b:()=>a});var r=s(19899);let o=[{value:"web_search",label:"Web Search",description:"Web search capabilities (newer version)"},{value:"web_search_preview",label:"Web Search Preview",description:"Web search preview capabilities"},{value:"image_generation",label:"Image Generation",description:"Generate images from text descriptions"},{value:"computer_use_preview",label:"Computer Use Preview",description:"Control computer interfaces (requires configuration)"},{value:"file_search",label:"File Search",description:"Search uploaded files for context"},{value:"code_interpreter",label:"Code Interpreter",description:"Execute Python code in a secure sandbox"}],l=[{value:"auto",label:"Auto",description:"Model decides when to use tools"},{value:"required",label:"Required",description:"Model must use at least one tool"},{value:"none",label:"None",description:"Disable tools entirely"}];function a({step:e,isToolSelected:t,onToolToggle:s,onToolChoiceChange:a,onComputerUseConfigChange:i,computerUseConfig:n}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"OpenAI Tools"}),r.jsx("div",{className:"space-y-2 mb-3",children:o.map(e=>(0,r.jsxs)("label",{className:"flex items-start space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:t(e.value),onChange:()=>s(e.value),className:"mt-1 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.label}),r.jsx("p",{className:"text-xs text-gray-500",children:e.description})]})]},e.value))}),t("computer_use_preview")&&i&&n&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Computer Use Preview Configuration"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Display Width"}),r.jsx("input",{type:"number",value:n.display_width,onChange:e=>i("display_width",parseInt(e.target.value)||1024),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",min:"100",max:"4096"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Display Height"}),r.jsx("input",{type:"number",value:n.display_height,onChange:e=>i("display_height",parseInt(e.target.value)||768),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",min:"100",max:"4096"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Environment"}),(0,r.jsxs)("select",{value:n.environment,onChange:e=>i("environment",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",children:[r.jsx("option",{value:"browser",children:"Browser"}),r.jsx("option",{value:"mac",children:"macOS"}),r.jsx("option",{value:"windows",children:"Windows"}),r.jsx("option",{value:"ubuntu",children:"Ubuntu"})]})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tool Choice"}),r.jsx("select",{value:e.tool_choice||"auto",onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:l.map(e=>(0,r.jsxs)("option",{value:e.value,children:[e.label," - ",e.description]},e.value))})]})]})}},7038:(e,t,s)=>{s.d(t,{E:()=>o});var r=s(19899);function o({step:e,webhookHeaders:t,allSteps:s,currentStepIndex:o,onChange:l,onWebhookHeadersChange:a}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook URL *"}),r.jsx("input",{type:"url",value:e.webhook_url||"",onChange:e=>{e.stopPropagation(),l("webhook_url",e.target.value)},onKeyDown:e=>e.stopPropagation(),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"https://example.com/webhook",required:!0,autoComplete:"off"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"The URL where the POST request will be sent with selected data."})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook Headers (optional)"}),r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Add custom headers to include in the webhook request (e.g., Authorization)."}),(0,r.jsxs)("div",{className:"space-y-2",children:[Object.entries(t).map(([e,s],o)=>(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:e,onChange:r=>{r.stopPropagation();let o={...t};delete o[e],o[r.target.value]=s,a(o),l("webhook_headers",o)},onKeyDown:e=>e.stopPropagation(),placeholder:"Header name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",autoComplete:"off"}),r.jsx("input",{type:"text",value:s,onChange:s=>{s.stopPropagation();let r={...t,[e]:s.target.value};a(r),l("webhook_headers",r)},onKeyDown:e=>e.stopPropagation(),placeholder:"Header value",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",autoComplete:"off"}),r.jsx("button",{type:"button",onClick:()=>{let s={...t};delete s[e],a(s),l("webhook_headers",s)},className:"px-3 py-2 text-red-600 hover:text-red-700 text-sm",children:"Remove"})]},o)),r.jsx("button",{type:"button",onClick:()=>{a({...t,"":""})},className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"+ Add Header"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Selection"}),r.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Choose which data to include in the webhook payload. All step outputs are included by default."}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.webhook_data_selection?.include_submission!==!1,onChange:t=>{l("webhook_data_selection",{...e.webhook_data_selection||{include_submission:!0,exclude_step_indices:[],include_job_info:!0},include_submission:t.target.checked})},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),r.jsx("span",{className:"text-sm text-gray-900",children:"Include submission data"})]}),(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.webhook_data_selection?.include_job_info!==!1,onChange:t=>{l("webhook_data_selection",{...e.webhook_data_selection||{include_submission:!0,exclude_step_indices:[],include_job_info:!0},include_job_info:t.target.checked})},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),r.jsx("span",{className:"text-sm text-gray-900",children:"Include job information"})]}),s.length>0&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exclude Step Outputs (optional)"}),r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"All step outputs are included by default. Check steps to exclude from the payload."}),r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-3",children:s.map((t,s)=>{if(s>=o)return null;let a=(e.webhook_data_selection?.exclude_step_indices||[]).includes(s);return(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:a,onChange:t=>{let r=e.webhook_data_selection||{include_submission:!0,exclude_step_indices:[],include_job_info:!0},o=r.exclude_step_indices||[],a=t.target.checked?[...o,s]:o.filter(e=>e!==s);l("webhook_data_selection",{...r,exclude_step_indices:a})},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,r.jsxs)("span",{className:"text-sm text-gray-900",children:["Exclude: ",t.step_name||`Step ${s+1}`]})]},s)})})]})]})]})]})}},32183:(e,t,s)=>{s.d(t,{x:()=>o});var r=s(5507);function o({step:e,index:t,onChange:s}){let[o,l]=(0,r.useState)(e),[a,i]=(0,r.useState)(e.webhook_headers||{}),n=(0,r.useRef)(e),d=(0,r.useRef)(!1),c=(e,r)=>{d.current=!0;let a={...o,[e]:r};l(a),n.current=a,s(t,a)};return{localStep:o,webhookHeaders:a,handleChange:c,handleWebhookHeadersChange:e=>{i(e),c("webhook_headers",e)}}}},83100:(e,t,s)=>{s.d(t,{t:()=>o});var r=s(5507);function o({step:e,onChange:t}){let[s,o]=(0,r.useState)({display_width:1024,display_height:768,environment:"browser"}),l=t=>(e.tools||[]).some(e=>"string"==typeof e?e===t:e.type===t);return{computerUseConfig:s,isToolSelected:l,handleToolToggle:r=>{let o=e.tools||[];t("tools",l(r)?o.filter(e=>"string"==typeof e?e!==r:e.type!==r):"computer_use_preview"===r?[...o,{type:"computer_use_preview",display_width:s.display_width,display_height:s.display_height,environment:s.environment}]:[...o,r])},handleComputerUseConfigChange:(r,a)=>{let i={...s,[r]:a};o(i);let n=(e.tools||[]).map(e=>"object"==typeof e&&"computer_use_preview"===e.type?{...e,display_width:i.display_width,display_height:i.display_height,environment:i.environment}:e);l("computer_use_preview")&&!n.some(e=>"object"==typeof e&&"computer_use_preview"===e.type)&&n.push({type:"computer_use_preview",display_width:i.display_width,display_height:i.display_height,environment:i.environment}),t("tools",n)}}}}};