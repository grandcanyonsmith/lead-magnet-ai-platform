(()=>{var e={};e.id=594,e.ids=[594],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},45638:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),n(96919),n(20094),n(75966),n(12874);var s=n(27105),r=n(15265),o=n(90157),i=n.n(o),a=n(44665),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);n.d(t,l);let c=["",{children:["dashboard",{children:["agency",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,96919)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/agency/users/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,20094)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,75966)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,12874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/agency/users/page.tsx"],u="/dashboard/agency/users/page",p={require:n,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/agency/users/page",pathname:"/dashboard/agency/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},21622:(e,t,n)=>{Promise.resolve().then(n.bind(n,38132))},38132:(e,t,n)=>{"use strict";let s,r,o,i;n.r(t),n.d(t,{default:()=>eP});var a=n(19899),l=n(5507),c=n(76153),d=n(33957),u=n(16739),p=n(511),x=n(55505),m=n(65408),h=n(99424),f=n(85549),b=n(85649),v=n(79889),g=n(42783),y=n(87013),w=n(68211),j=n(52362),N=n(90304),O=n(44955),S=n(13358),k=n(76546),E=n(15405),R=n(54714),I=n(60332),P=n(31642),T=n(11432),_=n(77353),C=n(37116),M=n(61550),L=n(90172);function A(e,t){return e?e+"["+t+"]":t}var D=n(33402),F=n(77278);let U=(0,l.createContext)(null);function q({children:e}){let t=(0,l.useContext)(U);if(!t)return l.createElement(l.Fragment,null,e);let{target:n}=t;return n?(0,m.createPortal)(l.createElement(l.Fragment,null,e),n):null}function z({data:e,form:t,disabled:n,onReset:s,overrides:r}){let[o,i]=(0,l.useState)(null);return(0,b.G)(),l.createElement(q,null,l.createElement(V,{setForm:i,formId:t}),(function e(t={},n=null,s=[]){for(let[r,o]of Object.entries(t))(function t(n,s,r){if(Array.isArray(r))for(let[e,o]of r.entries())t(n,A(s,e.toString()),o);else r instanceof Date?n.push([s,r.toISOString()]):"boolean"==typeof r?n.push([s,r?"1":"0"]):"string"==typeof r?n.push([s,r]):"number"==typeof r?n.push([s,`${r}`]):null==r?n.push([s,""]):function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}(r)&&!(0,l.isValidElement)(r)&&e(r,s,n)})(s,A(n,r),o);return s})(e).map(([e,s])=>l.createElement(F._,{features:F.x.Hidden,...(0,D.oA)({key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:t,disabled:n,name:e,value:s,...r})})))}function V({setForm:e,formId:t}){return t?null:l.createElement(F._,{features:F.x.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:t=>{if(!t)return;let n=t.closest("form");n&&e(n)}})}var B=n(5985),$=n(94828),G=n(19265),Q=n(52382),H=n(73759),Y=n(35060),J=n(5925),K=n(62211),Z=n(18032),W=n(52801),X=n(15840),ee=n(50305),et=n(41837),en=n(7068),es=n(84041),er=Object.defineProperty,eo=(e,t,n)=>t in e?er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ei=(e,t,n)=>(eo(e,"symbol"!=typeof t?t+"":t,n),n),ea=((s=ea||{})[s.Open=0]="Open",s[s.Closed=1]="Closed",s),el=((r=el||{})[r.Single=0]="Single",r[r.Multi=1]="Multi",r),ec=((o=ec||{})[o.Pointer=0]="Pointer",o[o.Other=1]="Other",o),ed=((i=ed||{})[i.OpenListbox=0]="OpenListbox",i[i.CloseListbox=1]="CloseListbox",i[i.GoToOption=2]="GoToOption",i[i.Search=3]="Search",i[i.ClearSearch=4]="ClearSearch",i[i.SelectOption=5]="SelectOption",i[i.RegisterOptions=6]="RegisterOptions",i[i.UnregisterOptions=7]="UnregisterOptions",i[i.SetButtonElement=8]="SetButtonElement",i[i.SetOptionsElement=9]="SetOptionsElement",i[i.SortOptions=10]="SortOptions",i[i.MarkButtonAsMoved=11]="MarkButtonAsMoved",i);function eu(e,t=e=>e){let n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,s=(0,K.z2)(t(e.options.slice()),e=>e.dataRef.current.domRef.current),r=n?s.indexOf(n):null;return -1===r&&(r=null),{options:s,activeOptionIndex:r}}let ep={1(e){if(e.dataRef.current.disabled||1===e.listboxState)return e;let t=e.buttonElement?es.On.Tracked((0,es.kn)(e.buttonElement)):e.buttonPositionState;return{...e,activeOptionIndex:null,pendingFocus:{focus:H.T.Nothing},listboxState:1,__demoMode:!1,buttonPositionState:t}},0(e,t){if(e.dataRef.current.disabled||0===e.listboxState)return e;let n=e.activeOptionIndex,{isSelected:s}=e.dataRef.current,r=e.options.findIndex(e=>s(e.dataRef.current.value));return -1!==r&&(n=r),{...e,frozenValue:!1,pendingFocus:t.focus,listboxState:0,activeOptionIndex:n,__demoMode:!1,buttonPositionState:es.On.Idle}},2(e,t){var n,s,r,o,i;if(e.dataRef.current.disabled||1===e.listboxState)return e;let a={...e,searchQuery:"",activationTrigger:null!=(n=t.trigger)?n:1,__demoMode:!1};if(t.focus===H.T.Nothing)return{...a,activeOptionIndex:null};if(t.focus===H.T.Specific)return{...a,activeOptionIndex:e.options.findIndex(e=>e.id===t.id)};if(t.focus===H.T.Previous){let n=e.activeOptionIndex;if(null!==n){let o=e.options[n].dataRef.current.domRef,i=(0,H.d)(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});if(null!==i){let t=e.options[i].dataRef.current.domRef;if((null==(s=o.current)?void 0:s.previousElementSibling)===t.current||(null==(r=t.current)?void 0:r.previousElementSibling)===null)return{...a,activeOptionIndex:i}}}}else if(t.focus===H.T.Next){let n=e.activeOptionIndex;if(null!==n){let s=e.options[n].dataRef.current.domRef,r=(0,H.d)(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});if(null!==r){let t=e.options[r].dataRef.current.domRef;if((null==(o=s.current)?void 0:o.nextElementSibling)===t.current||(null==(i=t.current)?void 0:i.nextElementSibling)===null)return{...a,activeOptionIndex:r}}}}let l=eu(e),c=(0,H.d)(t,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...a,...l,activeOptionIndex:c}},3:(e,t)=>{if(e.dataRef.current.disabled||1===e.listboxState)return e;let n=""!==e.searchQuery?0:1,s=e.searchQuery+t.value.toLowerCase(),r=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find(e=>{var t;return!e.dataRef.current.disabled&&(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(s))}),o=r?e.options.indexOf(r):-1;return -1===o||o===e.activeOptionIndex?{...e,searchQuery:s}:{...e,searchQuery:s,activeOptionIndex:o,activationTrigger:1}},4:e=>e.dataRef.current.disabled||1===e.listboxState||""===e.searchQuery?e:{...e,searchQuery:""},5:e=>0===e.dataRef.current.mode?{...e,frozenValue:!0}:{...e},6:(e,t)=>{let n=e.options.concat(t.options),s=e.activeOptionIndex;if(e.pendingFocus.focus!==H.T.Nothing&&(s=(0,H.d)(e.pendingFocus,{resolveItems:()=>n,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled})),null===e.activeOptionIndex){let{isSelected:t}=e.dataRef.current;if(t){let e=n.findIndex(e=>null==t?void 0:t(e.dataRef.current.value));-1!==e&&(s=e)}}return{...e,options:n,activeOptionIndex:s,pendingFocus:{focus:H.T.Nothing},pendingShouldSort:!0}},7:(e,t)=>{let n=e.options,s=[],r=new Set(t.options);for(let[e,t]of n.entries())if(r.has(t.id)&&(s.push(e),r.delete(t.id),0===r.size))break;if(s.length>0)for(let e of(n=n.slice(),s.reverse()))n.splice(e,1);return{...e,options:n,activationTrigger:1}},8:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},9:(e,t)=>e.optionsElement===t.element?e:{...e,optionsElement:t.element},10:e=>e.pendingShouldSort?{...e,...eu(e),pendingShouldSort:!1}:e,11:e=>"Tracked"!==e.buttonPositionState.kind?e:{...e,buttonPositionState:es.On.Moved}};class ex extends en.J{constructor(e){super(e),ei(this,"actions",{onChange:e=>{let{onChange:t,compare:n,mode:s,value:r}=this.state.dataRef.current;return(0,Z.E)(s,{0:()=>null==t?void 0:t(e),1:()=>{let s=r.slice(),o=s.findIndex(t=>n(t,e));return -1===o?s.push(e):s.splice(o,1),null==t?void 0:t(s)}})},registerOption:(0,en.dC)(()=>{let e=[],t=new Set;return[(n,s)=>{t.has(s)||(t.add(s),e.push({id:n,dataRef:s}))},()=>(t.clear(),this.send({type:6,options:e.splice(0)}))]}),unregisterOption:(0,en.dC)(()=>{let e=[];return[t=>e.push(t),()=>{this.send({type:7,options:e.splice(0)})}]}),goToOption:(0,en.dC)(()=>{let e=null;return[(t,n)=>{e={type:2,...t,trigger:n}},()=>e&&this.send(e)]}),closeListbox:()=>{this.send({type:1})},openListbox:e=>{this.send({type:0,focus:e})},selectActiveOption:()=>{var e;if(null!==this.state.activeOptionIndex){let{dataRef:e}=this.state.options[this.state.activeOptionIndex];this.actions.selectOption(e.current.value)}else 0===this.state.dataRef.current.mode&&(this.actions.closeListbox(),null==(e=this.state.buttonElement)||e.focus({preventScroll:!0}))},selectOption:e=>{this.send({type:5,value:e})},search:e=>{this.send({type:3,value:e})},clearSearch:()=>{this.send({type:4})},setButtonElement:e=>{this.send({type:8,element:e})},setOptionsElement:e=>{this.send({type:9,element:e})}}),ei(this,"selectors",{activeDescendantId(e){var t;let n=e.activeOptionIndex,s=e.options;return null===n||null==(t=s[n])?void 0:t.id},isActive(e,t){var n;let s=e.activeOptionIndex,r=e.options;return null!==s&&(null==(n=r[s])?void 0:n.id)===t},hasFrozenValue:e=>e.frozenValue,shouldScrollIntoView(e,t){return!e.__demoMode&&0===e.listboxState&&0!==e.activationTrigger&&this.isActive(e,t)},didButtonMove:e=>"Moved"===e.buttonPositionState.kind}),this.on(6,()=>{requestAnimationFrame(()=>{this.send({type:10})})});{let e=this.state.id,t=G.n.get(null);this.disposables.add(t.on(G.M.Push,n=>{t.selectors.isTop(n,e)||0!==this.state.listboxState||this.actions.closeListbox()})),this.on(0,()=>t.actions.push(e)),this.on(1,()=>t.actions.pop(e))}this.disposables.group(e=>{this.on(1,t=>{t.buttonElement&&(e.dispose(),e.add((0,es.hS)(t.buttonElement,t.buttonPositionState,()=>{this.send({type:11})})))})}),this.on(5,(e,t)=>{var n;this.actions.onChange(t.value),0===this.state.dataRef.current.mode&&(this.actions.closeListbox(),null==(n=this.state.buttonElement)||n.focus({preventScroll:!0}))})}static new({id:e,__demoMode:t=!1}){return new ex({id:e,dataRef:{current:{}},listboxState:t?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,buttonElement:null,optionsElement:null,pendingShouldSort:!1,pendingFocus:{focus:H.T.Nothing},frozenValue:!1,__demoMode:t,buttonPositionState:es.On.Idle})}reduce(e,t){return(0,Z.E)(t.type,ep,e,t)}}var em=n(4534);let eh=(0,l.createContext)(null);function ef(e){let t=(0,l.useContext)(eh);if(null===t){let t=Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,eb),t}return t}function eb({id:e,__demoMode:t=!1}){let n=(0,l.useMemo)(()=>ex.new({id:e,__demoMode:t}),[]);return(0,em.L)(()=>n.dispose()),n}let ev=(0,l.createContext)(null);function eg(e){let t=(0,l.useContext)(ev);if(null===t){let t=Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,eg),t}return t}ev.displayName="ListboxDataContext";let ey=l.Fragment,ew=(0,l.createContext)(!1),ej=D.VN.RenderStrategy|D.VN.Static,eN=l.Fragment,eO=Object.assign((0,D.yV)(function(e,t){let n=(0,l.useId)(),s=(0,M.B)(),{value:r,defaultValue:o,form:i,name:a,onChange:c,by:d,invalid:u=!1,disabled:p=s||!1,horizontal:x=!1,multiple:h=!1,__demoMode:b=!1,...v}=e,g=(0,P.T)(t),y=function(e){let[t]=(0,l.useState)(e);return t}(o),[j=h?[]:void 0,N]=function(e,t,n){let[s,r]=(0,l.useState)(n),o=void 0!==e,i=(0,l.useRef)(o),a=(0,l.useRef)(!1),c=(0,l.useRef)(!1);return!o||i.current||a.current?o||!i.current||c.current||(c.current=!0,i.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(a.current=!0,i.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[o?e:s,(0,f.z)(e=>(o||(0,m.flushSync)(()=>r(e)),null==t?void 0:t(e)))]}(r,c,y),S=eb({id:n,__demoMode:b}),k=(0,l.useRef)({static:!1,hold:!1}),E=(0,l.useRef)(new Map),R=function(e=function(e,t){return null!==e&&null!==t&&"object"==typeof e&&"object"==typeof t&&"id"in e&&"id"in t?e.id===t.id:e===t}){return(0,l.useCallback)((t,n)=>"string"==typeof e?(null==t?void 0:t[e])===(null==n?void 0:n[e]):e(t,n),[e])}(d),T=(0,l.useCallback)(e=>(0,Z.E)(_.mode,{[el.Multi]:()=>j.some(t=>R(t,e)),[el.Single]:()=>R(j,e)}),[j]),_=(0,I.x)({value:j,disabled:p,invalid:u,mode:h?el.Multi:el.Single,orientation:x?"horizontal":"vertical",onChange:N,compare:R,isSelected:T,optionsPropsRef:k,listRef:E});(0,w.e)(()=>{S.state.dataRef.current=_},[_]);let C=(0,Q.M)(S,e=>e.listboxState),A=G.n.get(null),F=(0,Q.M)(A,(0,l.useCallback)(e=>A.selectors.isTop(e,n),[A,n])),[U,q]=(0,Q.M)(S,e=>[e.buttonElement,e.optionsElement]);(0,O.O)(F,[U,q],(e,t)=>{S.send({type:ed.CloseListbox}),(0,K.sP)(t,K.tJ.Loose)||(e.preventDefault(),null==U||U.focus())});let V=(0,I.x)({open:C===ea.Open,disabled:p,invalid:u,value:j}),[B,H]=(0,ee.bE)({inherit:!0}),Y=(0,l.useCallback)(()=>{if(void 0!==y)return null==N?void 0:N(y)},[N,y]),J=(0,D.L6)();return l.createElement(H,{value:B,props:{htmlFor:null==U?void 0:U.id},slot:{open:C===ea.Open,disabled:p}},l.createElement(L.HO,null,l.createElement(eh.Provider,{value:S},l.createElement(ev.Provider,{value:_},l.createElement($.up,{value:(0,Z.E)(C,{[ea.Open]:$.ZM.Open,[ea.Closed]:$.ZM.Closed})},null!=a&&null!=j&&l.createElement(z,{disabled:p,data:{[a]:j},form:i,onReset:Y}),J({ourProps:{ref:g},theirProps:v,slot:V,defaultTag:ey,name:"Listbox"}))))))}),{Button:(0,D.yV)(function(e,t){let n=(0,l.useId)(),s=(0,B.Q)(),r=eg("Listbox.Button"),o=ef("Listbox.Button"),{id:i=s||`headlessui-listbox-button-${n}`,disabled:a=r.disabled||!1,autoFocus:c=!1,...d}=e,u=(0,P.T)(t,(0,L.AZ)(),o.actions.setButtonElement),b=(0,L.L)(),[v,y,w]=(0,Q.M)(o,e=>[e.listboxState,e.buttonElement,e.optionsElement]),j=v===ea.Open;(0,k.G)(j,{trigger:y,action:(0,l.useCallback)(e=>{if(null!=y&&y.contains(e.target))return k.a.Ignore;let t=e.target.closest('[role="option"]:not([data-disabled])');return J.Re(t)?k.a.Select(t):null!=w&&w.contains(e.target)?k.a.Ignore:k.a.Close},[y,w]),close:o.actions.closeListbox,select:o.actions.selectActiveOption});let N=(0,f.z)(e=>{switch(e.key){case X.R.Enter:!function(e){var t,n;let s=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(s){for(let t of s.elements)if(t!==e&&("INPUT"===t.tagName&&"submit"===t.type||"BUTTON"===t.tagName&&"submit"===t.type||"INPUT"===t.nodeName&&"image"===t.type)){t.click();return}null==(n=s.requestSubmit)||n.call(s)}}(e.currentTarget);break;case X.R.Space:case X.R.ArrowDown:e.preventDefault(),o.actions.openListbox({focus:r.value?H.T.Nothing:H.T.First});break;case X.R.ArrowUp:e.preventDefault(),o.actions.openListbox({focus:r.value?H.T.Nothing:H.T.Last})}}),O=(0,f.z)(e=>{e.key===X.R.Space&&e.preventDefault()}),S=(0,g.a)(e=>{var t;o.state.listboxState===ea.Open?((0,m.flushSync)(()=>o.actions.closeListbox()),null==(t=o.state.buttonElement)||t.focus({preventScroll:!0})):(e.preventDefault(),o.actions.openListbox({focus:H.T.Nothing}))}),R=(0,f.z)(e=>e.preventDefault()),T=(0,ee.wp)([i]),_=(0,W.zH)(),{isFocusVisible:C,focusProps:M}=(0,p.F)({autoFocus:c}),{isHovered:A,hoverProps:F}=(0,x.X)({isDisabled:a}),{pressed:U,pressProps:q}=(0,h.x)({disabled:a}),z=(0,I.x)({open:v===ea.Open,active:U||v===ea.Open,disabled:a,invalid:r.invalid,value:r.value,hover:A,focus:C,autofocus:c}),V=(0,Q.M)(o,e=>e.listboxState===ea.Open),$=(0,D.dG)(b(),{ref:u,id:i,type:(0,E.f)(e,y),"aria-haspopup":"listbox","aria-controls":null==w?void 0:w.id,"aria-expanded":V,"aria-labelledby":T,"aria-describedby":_,disabled:a||void 0,autoFocus:c,onKeyDown:N,onKeyUp:O,onKeyPress:R},S,M,F,q);return(0,D.L6)()({ourProps:$,theirProps:d,slot:z,defaultTag:"button",name:"Listbox.Button"})}),Label:ee.__,Options:(0,D.yV)(function(e,t){let n=(0,l.useId)(),{id:s=`headlessui-listbox-options-${n}`,anchor:r,portal:o=!1,modal:i=!0,transition:a=!1,...c}=e,d=(0,L.Vy)(r),[u,p]=(0,l.useState)(null);d&&(o=!0);let x=eg("Listbox.Options"),h=ef("Listbox.Options"),[g,w,j,O]=(0,Q.M)(h,e=>[e.listboxState,e.buttonElement,e.optionsElement,e.__demoMode]),k=(0,S.i)(w),E=(0,S.i)(j),T=(0,$.oJ)(),[_,M]=(0,C.Y)(a,u,null!==T?(T&$.ZM.Open)===$.ZM.Open:g===ea.Open);(0,N.m)(_,w,h.actions.closeListbox);let A=!O&&i&&g===ea.Open;(0,R.P)(A,E);let F=!O&&i&&g===ea.Open;(0,y.s)(F,{allowed:(0,l.useCallback)(()=>[w,j],[w,j])});let U=!(0,Q.M)(h,h.selectors.didButtonMove)&&_,q=function(e,t){let[n,s]=(0,l.useState)(t);return e||n===t||s(t),e?n:t}((0,Q.M)(h,h.selectors.hasFrozenValue)&&!e.static,x.value),z=(0,l.useCallback)(e=>x.compare(q,e),[x.compare,q]),V=(0,Q.M)(h,e=>{var t;if(null==d||!(null!=(t=null==d?void 0:d.to)&&t.includes("selection")))return null;let n=e.options.findIndex(e=>z(e.dataRef.current.value));return -1===n&&(n=0),n}),B=(()=>{if(null==d)return;if(null===V)return{...d,inner:void 0};let e=Array.from(x.listRef.current.values());return{...d,inner:{listRef:{current:e},index:V}}})(),[G,Y]=(0,L.ES)(B),J=(0,L.U8)(),W=(0,P.T)(t,d?G:null,h.actions.setOptionsElement,p),ee=(0,b.G)(),en=(0,f.z)(e=>{var t;switch(ee.dispose(),e.key){case X.R.Space:if(""!==h.state.searchQuery)return e.preventDefault(),e.stopPropagation(),h.actions.search(e.key);case X.R.Enter:e.preventDefault(),e.stopPropagation(),h.actions.selectActiveOption();break;case(0,Z.E)(x.orientation,{vertical:X.R.ArrowDown,horizontal:X.R.ArrowRight}):return e.preventDefault(),e.stopPropagation(),h.actions.goToOption({focus:H.T.Next});case(0,Z.E)(x.orientation,{vertical:X.R.ArrowUp,horizontal:X.R.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),h.actions.goToOption({focus:H.T.Previous});case X.R.Home:case X.R.PageUp:return e.preventDefault(),e.stopPropagation(),h.actions.goToOption({focus:H.T.First});case X.R.End:case X.R.PageDown:return e.preventDefault(),e.stopPropagation(),h.actions.goToOption({focus:H.T.Last});case X.R.Escape:e.preventDefault(),e.stopPropagation(),(0,m.flushSync)(()=>h.actions.closeListbox()),null==(t=h.state.buttonElement)||t.focus({preventScroll:!0});return;case X.R.Tab:e.preventDefault(),e.stopPropagation(),(0,m.flushSync)(()=>h.actions.closeListbox()),(0,K.EO)(h.state.buttonElement,e.shiftKey?K.TO.Previous:K.TO.Next);break;default:1===e.key.length&&(h.actions.search(e.key),ee.setTimeout(()=>h.actions.clearSearch(),350))}}),es=(0,Q.M)(h,e=>{var t;return null==(t=e.buttonElement)?void 0:t.id}),er=(0,I.x)({open:g===ea.Open}),eo=(0,D.dG)(d?J():{},{id:s,ref:W,"aria-activedescendant":(0,Q.M)(h,h.selectors.activeDescendantId),"aria-multiselectable":x.mode===el.Multi||void 0,"aria-labelledby":es,"aria-orientation":x.orientation,onKeyDown:en,role:"listbox",tabIndex:g===ea.Open?0:void 0,style:{...c.style,...Y,"--button-width":(0,v.h)(_,w,!0).width},...(0,C.X)(M)}),ei=(0,D.L6)(),ec=(0,l.useMemo)(()=>x.mode===el.Multi?x:{...x,isSelected:z},[x,z]);return l.createElement(et.h_,{enabled:!!o&&(e.static||_),ownerDocument:k},l.createElement(ev.Provider,{value:ec},ei({ourProps:eo,theirProps:c,slot:er,defaultTag:"div",features:ej,visible:U,name:"Listbox.Options"})))}),Option:(0,D.yV)(function(e,t){let n=(0,l.useId)(),{id:s=`headlessui-listbox-option-${n}`,disabled:r=!1,value:o,...i}=e,a=!0===(0,l.useContext)(ew),c=eg("Listbox.Option"),d=ef("Listbox.Option"),u=(0,Q.M)(d,e=>d.selectors.isActive(e,s)),p=c.isSelected(o),x=(0,l.useRef)(null),m=(0,T.x)(x),h=(0,j.E)({disabled:r,value:o,domRef:x,get textValue(){return m()}}),b=(0,P.T)(t,x,e=>{e?c.listRef.current.set(s,e):c.listRef.current.delete(s)}),v=(0,Q.M)(d,e=>d.selectors.shouldScrollIntoView(e,s));(0,w.e)(()=>{if(v)return(0,Y.k)().requestAnimationFrame(()=>{var e,t;null==(t=null==(e=x.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})},[v,x]),(0,w.e)(()=>{if(!a)return d.actions.registerOption(s,h),()=>d.actions.unregisterOption(s)},[h,s,a]);let g=(0,f.z)(e=>{if(r)return e.preventDefault();d.actions.selectOption(o)}),y=(0,f.z)(()=>{if(r)return d.actions.goToOption({focus:H.T.Nothing});d.actions.goToOption({focus:H.T.Specific,id:s})}),N=(0,_.g)(),O=(0,f.z)(e=>N.update(e)),S=(0,f.z)(e=>{N.wasMoved(e)&&(r||u&&d.state.activationTrigger===ec.Pointer||d.actions.goToOption({focus:H.T.Specific,id:s},ec.Pointer))}),k=(0,f.z)(e=>{N.wasMoved(e)&&(r||u&&d.state.activationTrigger===ec.Pointer&&d.actions.goToOption({focus:H.T.Nothing}))}),E=(0,I.x)({active:u,focus:u,selected:p,disabled:r,selectedOption:p&&a}),R=a?{}:{id:s,ref:b,role:"option",tabIndex:!0===r?void 0:-1,"aria-disabled":!0===r||void 0,"aria-selected":p,disabled:void 0,onClick:g,onFocus:y,onPointerEnter:O,onMouseEnter:O,onPointerMove:S,onMouseMove:S,onPointerLeave:k,onMouseLeave:k},C=(0,D.L6)();return!p&&a?null:C({ourProps:R,theirProps:i,slot:E,defaultTag:"div",name:"Listbox.Option"})}),SelectedOption:(0,D.yV)(function(e,t){let{options:n,placeholder:s,...r}=e,o={ref:(0,P.T)(t)},i=eg("ListboxSelectedOption"),a=(0,I.x)({}),c=void 0===i.value||null===i.value||i.mode===el.Multi&&Array.isArray(i.value)&&0===i.value.length,d=(0,D.L6)();return l.createElement(ew.Provider,{value:!0},d({ourProps:o,theirProps:{...r,children:l.createElement(l.Fragment,null,s&&c?s:n)},slot:a,defaultTag:eN,name:"ListboxSelectedOption"}))})});var eS=n(53216),ek=n(12330),eE=n(55562),eR=n(90832);let eI=[{value:"USER",label:"USER",icon:eE.fzv,color:"text-ink-600"},{value:"ADMIN",label:"ADMIN",icon:eE.tMu,color:"text-blue-600"},{value:"SUPER_ADMIN",label:"SUPER_ADMIN",icon:eE.bfl,color:"text-purple-600"}];function eP(){let{role:e,viewMode:t,refreshAuth:n,setViewMode:s}=(0,eS.a)(),r=(0,c.useRouter)(),[o,i]=(0,l.useState)([]),[p,x]=(0,l.useState)(!1),[m,h]=(0,l.useState)(""),[f,b]=(0,l.useState)(null),[v,g]=(0,l.useState)(null),[y,w]=(0,l.useState)(!1),[j,N]=(0,l.useState)(null),[O,S]=(0,l.useState)(null),k=async()=>{x(!0);try{let e=await ek.hi.get("/admin/agency/users",{params:{q:m||void 0,limit:100}});i(e.users||[])}catch(e){console.error("Error loading users:",e),i([])}finally{x(!1)}};if("SUPER_ADMIN"!==e||"agency"!==t)return a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"bg-yellow-50/80 border border-yellow-200 rounded-2xl p-4",children:a.jsx("p",{className:"text-yellow-800",children:"This page is only available to Super Admins in Agency View."})})});let E=e=>{b(e),g(eI.find(t=>t.value===e.role)||eI[0])},R=async()=>{if(f&&v){w(!0);try{await ek.hi.put(`/admin/agency/users/${f.user_id}`,{role:v.value}),await k(),b(null),g(null)}catch(e){console.error("Error updating user role:",e),eR.Am.error("Failed to update user role. Please try again.")}finally{w(!1)}}},I=e=>{let t=eI.find(t=>t.value===e);if(!t)return a.jsx(eE.fzv,{className:"w-4 h-4 text-ink-600"});let n=t.icon;return a.jsx(n,{className:`w-4 h-4 ${t.color}`})},P=e=>{switch(e){case"SUPER_ADMIN":return"bg-purple-100 text-purple-700";case"ADMIN":return"bg-blue-100 text-blue-700";default:return"bg-surface-50 text-ink-700"}},T=async e=>{N(e.user_id);try{let t=await ek.hi.post("/admin/impersonate",{targetUserId:e.user_id});localStorage.setItem("impersonation_session_id",t.session_id),await n(),e.customer_id?s("subaccount",e.customer_id):s("subaccount"),r.push("/dashboard")}catch(e){console.error("Error starting impersonation from agency table:",e),eR.Am.error("Failed to login as this user. Please try again.")}finally{N(null)}},_=async e=>{try{await navigator.clipboard.writeText(e),S(e),setTimeout(()=>S(null),2e3)}catch(e){console.error("Failed to copy customer ID:",e)}};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,a.jsxs)("h1",{className:"text-xl sm:text-2xl font-bold text-ink-900 flex items-center gap-2",children:[a.jsx(eE.WY8,{className:"w-5 h-5 sm:w-6 sm:h-6"}),"User Management"]}),a.jsx("p",{className:"text-sm sm:text-base text-ink-600 mt-1",children:"Manage users, roles, and permissions across all accounts"})]}),a.jsx("div",{className:"mb-4 sm:mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(eE.jRj,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-ink-400 w-4 h-4 sm:w-5 sm:h-5 pointer-events-none"}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full pl-9 sm:pl-10 pr-4 py-2.5 sm:py-2 text-base sm:text-sm border border-white/60 rounded-2xl bg-white/90 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 shadow-soft outline-none transition-colors",value:m,onChange:e=>h(e.target.value)})]})}),a.jsx("div",{className:"md:hidden space-y-3",children:p?(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft border border-white/60 p-8 text-center text-ink-500",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-brand-600"}),a.jsx("p",{className:"mt-2",children:"Loading users..."})]}):0===o.length?(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft border border-white/60 p-8 text-center text-ink-500",children:[a.jsx(eE.WY8,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No users found"})]}):o.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft border border-white/60 p-4 space-y-3 transition-shadow hover:shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-ink-900 truncate",children:e.name||"Unknown"}),a.jsx("div",{className:"text-sm text-ink-500 truncate mt-0.5",children:e.email})]}),(0,a.jsxs)("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ml-2 ${P(e.role)}`,children:[I(e.role),a.jsx("span",{className:"truncate max-w-[80px] sm:max-w-none",children:e.role})]})]}),(0,a.jsxs)("div",{className:"pt-2 border-t border-white/60 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-ink-500",children:"Customer ID:"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 min-w-0 flex-1 justify-end ml-2",children:[a.jsx("span",{className:"text-ink-900 font-mono truncate max-w-[140px]",title:e.customer_id,children:e.customer_id}),a.jsx("button",{onClick:()=>_(e.customer_id),className:"flex-shrink-0 p-1.5 text-ink-500 hover:text-ink-700 hover:bg-white/80 rounded-2xl transition-colors touch-target",title:O===e.customer_id?"Copied!":"Copy Customer ID","aria-label":"Copy Customer ID",children:O===e.customer_id?a.jsx(eE.UgA,{className:"w-3.5 h-3.5 text-emerald-600"}):a.jsx(eE.C3L,{className:"w-3.5 h-3.5"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-ink-500",children:"Created:"}),a.jsx("span",{className:"text-ink-900",children:new Date(e.created_at).toLocaleDateString()})]})]}),(0,a.jsxs)("div",{className:"pt-2 border-t border-white/60 flex flex-col gap-2",children:[(0,a.jsxs)("button",{onClick:()=>E(e),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-brand-600 hover:text-brand-700 hover:bg-brand-50/60 rounded-2xl transition-colors touch-target",children:[a.jsx(eE.IYd,{className:"w-4 h-4"}),"Edit Role"]}),(0,a.jsxs)("button",{onClick:()=>T(e),disabled:j===e.user_id,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-brand-600 hover:text-brand-700 hover:bg-brand-50/60 rounded-2xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed touch-target",children:[a.jsx(eE._fJ,{className:"w-4 h-4"}),j===e.user_id?"Logging in...":"Log in as"]})]})]},e.user_id))}),a.jsx("div",{className:"hidden md:block bg-white rounded-2xl shadow-soft border border-white/60 overflow-hidden",children:p?(0,a.jsxs)("div",{className:"p-8 text-center text-ink-500",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-brand-600"}),a.jsx("p",{className:"mt-2",children:"Loading users..."})]}):0===o.length?(0,a.jsxs)("div",{className:"p-8 text-center text-ink-500",children:[a.jsx(eE.WY8,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No users found"})]}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-white/60",children:[a.jsx("thead",{className:"bg-white/80",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-ink-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-ink-500 uppercase tracking-wider",children:"Customer ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-ink-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-ink-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-ink-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-white/60",children:o.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-white/80 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-ink-900",children:e.name||"Unknown"}),a.jsx("div",{className:"text-sm text-ink-500",children:e.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"text-sm text-ink-900 font-mono",children:e.customer_id}),a.jsx("button",{onClick:()=>_(e.customer_id),className:"p-1.5 text-ink-500 hover:text-ink-700 hover:bg-white/80 rounded-2xl transition-colors touch-target",title:O===e.customer_id?"Copied!":"Copy Customer ID","aria-label":"Copy Customer ID",children:O===e.customer_id?a.jsx(eE.UgA,{className:"w-4 h-4 text-emerald-600"}):a.jsx(eE.C3L,{className:"w-4 h-4"})})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${P(e.role)}`,children:[I(e.role),e.role]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-ink-500",children:new Date(e.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,a.jsxs)("button",{onClick:()=>E(e),className:"text-brand-600 hover:text-brand-700 flex items-center gap-1 transition-colors",children:[a.jsx(eE.IYd,{className:"w-4 h-4"}),"Edit Role"]}),(0,a.jsxs)("button",{onClick:()=>T(e),disabled:j===e.user_id,className:"text-brand-600 hover:text-brand-700 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(eE._fJ,{className:"w-4 h-4"}),j===e.user_id?"Logging in...":"Log in as"]})]})})]},e.user_id))})]})})}),a.jsx(d.u,{appear:!0,show:null!==f,as:l.Fragment,children:(0,a.jsxs)(u.Vq,{as:"div",className:"relative z-50",onClose:()=>{b(null),g(null)},children:[a.jsx(d.u.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:a.jsx(d.u.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(u.Vq.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-4 sm:p-6 shadow-soft border border-white/60 transition-all",children:[a.jsx(u.Vq.Title,{as:"h2",className:"text-lg sm:text-xl font-bold text-ink-900 mb-4",children:"Edit User Role"}),f&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-ink-600 mb-2",children:[a.jsx("strong",{children:"User:"})," ",f.name||f.email]}),(0,a.jsxs)("p",{className:"text-sm text-ink-600",children:[a.jsx("strong",{children:"Current Role:"})," ",f.role]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-ink-700 mb-2",children:"New Role"}),a.jsx(eO,{value:v,onChange:g,children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(eO.Button,{className:"relative w-full cursor-default rounded-2xl bg-white/90 py-2.5 sm:py-2 pl-3 pr-10 text-left text-base sm:text-sm border border-white/60 shadow-soft focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 transition-colors",children:[a.jsx("span",{className:"block truncate flex items-center gap-2",children:v&&(0,a.jsxs)(a.Fragment,{children:[(()=>{let e=v.icon;return a.jsx(e,{className:`w-4 h-4 ${v.color}`})})(),a.jsx("span",{children:v.label})]})}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:a.jsx(eE.bTu,{className:"h-4 w-4 text-ink-400","aria-hidden":"true"})})]}),a.jsx(d.u,{as:l.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx(eO.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-2xl bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm border border-white/60",children:eI.map(e=>a.jsx(eO.Option,{className:({active:e})=>`relative cursor-default select-none py-2 pl-3 pr-9 ${e?"bg-brand-50 text-brand-900":"text-ink-900"}`,value:e,children:({selected:t})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:`block truncate flex items-center gap-2 ${t?"font-medium":"font-normal"}`,children:[(()=>{let t=e.icon;return a.jsx(t,{className:`w-4 h-4 ${e.color}`})})(),a.jsx("span",{children:e.label})]}),t?a.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-brand-600",children:a.jsx(eE.UgA,{className:"h-4 w-4","aria-hidden":"true"})}):null]})},e.value))})})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:[a.jsx("button",{onClick:R,disabled:y||!v||v.value===f.role,className:"flex-1 bg-brand-600 text-white px-4 py-2.5 sm:py-2 rounded-2xl hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-soft touch-target font-medium focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2",children:y?"Saving...":"Save"}),a.jsx("button",{onClick:()=>{b(null),g(null)},className:"flex-1 bg-white border border-white/60 text-ink-700 px-4 py-2.5 sm:py-2 rounded-2xl hover:bg-white/90 transition-colors shadow-soft touch-target font-medium focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2",children:"Cancel"})]})]})]})})})})]})})]})}},96919:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});let s=(0,n(2772).createProxy)(String.raw`/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/agency/users/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),s=t.X(0,[257,138,957,200,247,739,920,501],()=>n(45638));module.exports=s})();