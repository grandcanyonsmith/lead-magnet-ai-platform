(()=>{var e={};e.id=805,e.ids=[805],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},76649:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c}),s(17512),s(20094),s(75966),s(12874);var r=s(27105),a=s(15265),i=s(90157),l=s.n(i),n=s(44665),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["dashboard",{children:["artifacts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,17512)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/artifacts/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,20094)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,75966)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,12874,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/artifacts/page.tsx"],x="/dashboard/artifacts/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/artifacts/page",pathname:"/dashboard/artifacts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},35670:(e,t,s)=>{Promise.resolve().then(s.bind(s,66538))},66538:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(19899),a=s(5507),i=s(12330),l=s(55562),n=s(86583);function o({artifact:e}){var t,s;let a=e.object_url||e.public_url;return(0,r.jsxs)("div",{className:"group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-primary-200",children:[(0,r.jsxs)("div",{className:"relative aspect-video bg-gray-100",children:[r.jsx(n.i,{contentType:e.content_type||e.mime_type,objectUrl:a,fileName:e.file_name||e.artifact_name,className:"w-full h-full",artifactId:e.artifact_id}),r.jsx("div",{className:"absolute top-2 right-2 bg-primary-600 text-white text-xs font-bold px-2 py-1 rounded",children:(t=e.file_name||e.artifact_name,s=e.content_type||e.mime_type,t&&t.includes(".")?t.split(".").pop()?.toUpperCase()||"FILE":s?s.split("/")[1].toUpperCase():"FILE")}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end justify-end p-4 gap-2",children:a?(0,r.jsxs)(r.Fragment,{children:[r.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"bg-white text-gray-900 p-2.5 rounded-lg hover:bg-gray-100 transition-colors shadow-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",title:"Preview in new tab",onClick:e=>e.stopPropagation(),children:r.jsx(l.AlO,{className:"w-5 h-5"})}),r.jsx("a",{href:a,download:e.file_name||e.artifact_name||`download.${e.content_type?.split("/")[1]}`,className:"bg-primary-600 text-white p-2.5 rounded-lg hover:bg-primary-700 transition-colors shadow-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",title:"Download",onClick:e=>e.stopPropagation(),children:r.jsx(l._hL,{className:"w-5 h-5"})})]}):r.jsx("div",{className:"bg-gray-800/80 text-white text-xs px-3 py-2 rounded-lg",children:"No URL available"})})]}),(0,r.jsxs)("div",{className:"p-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 truncate mb-2 group-hover:text-primary-600 transition-colors",children:e.file_name||e.artifact_name||e.artifact_id}),(0,r.jsxs)("div",{className:"space-y-1.5 text-sm text-gray-600",children:[e.artifact_type&&r.jsx("div",{className:"flex items-center gap-1.5",children:r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:e.artifact_type})}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(l.TCC,{className:"w-3.5 h-3.5 text-gray-400"}),r.jsx("span",{children:(e=>{if(!e)return"-";let t=new Date(e),s=new Date().getTime()-t.getTime(),r=Math.floor(s/6e4),a=Math.floor(s/36e5),i=Math.floor(s/864e5);return r<1?"Just now":r<60?`${r}m ago`:a<24?`${a}h ago`:i<7?`${i}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})(e.created_at)})]}),(e.size_bytes||e.file_size_bytes)&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(l.mj,{className:"w-3.5 h-3.5 text-gray-400"}),r.jsx("span",{children:(e=>{if(!e&&0!==e)return"-";if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,t)).toFixed(1)} ${["B","KB","MB","GB"][t]}`})(e.size_bytes||e.file_size_bytes)})]})]}),e.job_id&&(0,r.jsxs)("div",{className:"text-xs text-gray-500 font-mono truncate",title:e.job_id,children:["Job: ",e.job_id.substring(0,12),"..."]})]})]})]})}function c({searchQuery:e,onSearchChange:t,selectedType:s,onTypeChange:a,artifactTypes:i}){return r.jsx("div",{className:"bg-white rounded-2xl shadow-soft border border-white/60 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(l.jRj,{className:"h-5 w-5 text-ink-400"})}),r.jsx("input",{type:"text",placeholder:"Search files...",value:e,onChange:e=>t(e.target.value),className:"block w-full pl-10 pr-3 py-2.5 border border-white/60 rounded-2xl bg-white/90 text-ink-900 placeholder-ink-400 shadow-soft focus:ring-2 focus:ring-brand-500 focus:border-brand-500"})]}),r.jsx("div",{className:"sm:w-64",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(l.Ihx,{className:"h-5 w-5 text-ink-400"})}),(0,r.jsxs)("select",{value:s,onChange:e=>a(e.target.value),className:"block w-full pl-10 pr-3 py-2.5 border border-white/60 rounded-2xl bg-white/90 text-ink-900 shadow-soft focus:ring-2 focus:ring-brand-500 focus:border-brand-500 appearance-none cursor-pointer",children:[r.jsx("option",{value:"",children:"All Types"}),i.map(e=>r.jsx("option",{value:e,children:e},e))]})]})})]})})}function d({currentPage:e,totalPages:t,totalItems:s,itemsPerPage:a,onPageChange:i}){if(t<=1)return null;let n=Math.min(e*a,s);return r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 px-6 py-4 mt-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",r.jsx("span",{className:"font-medium",children:(e-1)*a+1})," to"," ",r.jsx("span",{className:"font-medium",children:n})," of"," ",r.jsx("span",{className:"font-medium",children:s})," downloads"]}),(0,r.jsxs)("nav",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>i(e-1),disabled:1===e,className:"p-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white transition-colors","aria-label":"Previous page",children:r.jsx(l.YFh,{className:"w-5 h-5"})}),(()=>{let s=[];if(t<=7)for(let e=1;e<=t;e++)s.push(e);else if(e<=3){for(let e=1;e<=5;e++)s.push(e);s.push("..."),s.push(t)}else if(e>=t-2){s.push(1),s.push("...");for(let e=t-4;e<=t;e++)s.push(e)}else{s.push(1),s.push("...");for(let t=e-1;t<=e+1;t++)s.push(t);s.push("..."),s.push(t)}return s})().map((t,s)=>"..."===t?r.jsx("span",{className:"px-3 py-2 text-gray-500",children:"..."},`ellipsis-${s}`):r.jsx("button",{onClick:()=>i(t),className:`min-w-[2.5rem] px-3 py-2 rounded-lg font-medium transition-colors ${e===t?"bg-primary-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:t},t)),r.jsx("button",{onClick:()=>i(e+1),disabled:e===t,className:"p-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white transition-colors","aria-label":"Next page",children:r.jsx(l.Tfp,{className:"w-5 h-5"})})]})]})})}function x(){let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0),[x,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),[p,f]=(0,a.useState)(""),[g,b]=(0,a.useState)(1),j=async()=>{try{let e=(await i.hi.getArtifacts({limit:500})).artifacts||[];t(e)}catch(e){console.error("Failed to load artifacts:",e)}finally{n(!1)}},y=async()=>{m(!0);try{await j()}finally{m(!1)}},w=(0,a.useMemo)(()=>{let t=new Set;return e.forEach(e=>{e.artifact_type&&t.add(e.artifact_type)}),Array.from(t).sort()},[e]),N=(0,a.useMemo)(()=>{let t=e.filter(e=>{let t=!u||(e.file_name||e.artifact_name||"").toLowerCase().includes(u.toLowerCase())||e.artifact_id.toLowerCase().includes(u.toLowerCase()),s=!p||e.artifact_type===p;return t&&s});return t.sort((e,t)=>{let s=new Date(e.created_at||0).getTime(),r=new Date(t.created_at||0).getTime();if(r!==s)return r-s;let a=e.workflow_id||e.job_id||`no-group-${e.artifact_id}`,i=t.workflow_id||t.job_id||`no-group-${t.artifact_id}`;return a.localeCompare(i)}),t},[e,u,p]),v=Math.ceil(N.length/12),_=(0,a.useMemo)(()=>{let e=(g-1)*12;return N.slice(e,e+12)},[N,g]);return s?r.jsx("div",{className:"flex items-center justify-center py-24",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block w-12 h-12 border-4 border-brand-200 border-t-brand-600 rounded-full animate-spin mb-4"}),r.jsx("p",{className:"text-ink-600",children:"Loading downloads..."})]})}):(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-ink-900",children:"Downloads"}),(0,r.jsxs)("p",{className:"text-ink-600 mt-1",children:[N.length," ",1===N.length?"file":"files"," available"]})]}),(0,r.jsxs)("button",{onClick:y,disabled:x,className:"inline-flex items-center px-4 py-2.5 bg-white border border-white/60 rounded-2xl text-ink-600 hover:bg-white/90 transition-all shadow-soft disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(l.Bw1,{className:`w-4 h-4 mr-2 ${x?"animate-spin":""}`}),"Refresh"]})]}),e.length>0&&r.jsx(c,{searchQuery:u,onSearchChange:h,selectedType:p,onTypeChange:f,artifactTypes:w}),0===N.length?(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft border border-white/60 p-16 text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/80 rounded-full mb-4",children:r.jsx(l.ND7,{className:"w-8 h-8 text-ink-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-ink-900 mb-2",children:0===e.length?"No downloads yet":"No matching files"}),r.jsx("p",{className:"text-ink-600",children:0===e.length?"Generated files will appear here after you run workflows":"Try adjusting your search or filter criteria"}),(u||p)&&r.jsx("button",{onClick:()=>{h(""),f("")},className:"mt-4 text-brand-600 hover:text-brand-700 font-medium",children:"Clear filters"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:_.map(e=>r.jsx(o,{artifact:e},e.artifact_id))}),r.jsx(d,{currentPage:g,totalPages:v,totalItems:N.length,itemsPerPage:12,onPageChange:b})]})]})}},86583:(e,t,s)=>{"use strict";s.d(t,{i:()=>o});var r=s(19899),a=s(5507),i=s(55562),l=s(54051),n=s(79037);function o({contentType:e,objectUrl:t,fileName:s,className:o="",artifactId:c}){let[d,x]=(0,a.useState)(!1),[m,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[b,j]=(0,a.useState)(!1),[y,w]=(0,a.useState)(null),[N,v]=(0,a.useState)(!1),_=(0,a.useRef)(null),k=e||s&&({html:"text/html",htm:"text/html",md:"text/markdown",markdown:"text/markdown",txt:"text/plain",json:"application/json",pdf:"application/pdf",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",svg:"image/svg+xml"})[s.split(".").pop()?.toLowerCase()||""]||"application/octet-stream";return t||c?r.jsx("div",{ref:_,className:`overflow-hidden ${o}`,children:(()=>{if(k.startsWith("image/"))return(0,r.jsxs)("div",{className:"relative w-full h-full",children:[!d&&!m&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:r.jsx(i.LFN,{className:"w-12 h-12 text-gray-400 animate-pulse"})}),m&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:r.jsx(i.LFN,{className:"w-12 h-12 text-gray-400"})}),h&&r.jsx("img",{src:t,alt:s||"Preview",className:`w-full h-full object-cover ${d?"opacity-100":"opacity-0"}`,onLoad:()=>x(!0),onError:()=>u(!0),loading:"lazy"})]});if("application/pdf"===k)return r.jsx("div",{className:"relative w-full h-full bg-white",children:h&&t?r.jsx("iframe",{src:`${t}#toolbar=0&navpanes=0&scrollbar=0`,className:"w-full h-full border-0",title:s||"PDF Preview"}):r.jsx("div",{className:"flex items-center justify-center h-full bg-gray-100",children:r.jsx(i.NOg,{className:"w-12 h-12 text-red-400"})})});if("text/html"===k||"application/xhtml+xml"===k)return r.jsx("div",{className:"relative w-full h-full bg-white",children:h?N?r.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(i.xqv,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load HTML"})]})}):y?r.jsx("iframe",{srcDoc:y,className:"w-full h-full border-0",title:s||"HTML Preview",sandbox:"allow-same-origin allow-scripts",referrerPolicy:"no-referrer"}):r.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(i.xqv,{className:"w-12 h-12 text-blue-400 mx-auto mb-2 animate-pulse"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Loading HTML..."})]})}):r.jsx("div",{className:"flex items-center justify-center h-full bg-gray-100",children:r.jsx(i.xqv,{className:"w-12 h-12 text-blue-400"})})});if("text/markdown"===k)return r.jsx("div",{className:"relative w-full h-full bg-white overflow-auto",children:h?b?r.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(i.NOg,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load markdown"})]})}):f?r.jsx("div",{className:"p-4 prose prose-sm max-w-none",children:r.jsx(l.UG,{remarkPlugins:[n.Z],children:f})}):r.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(i.NOg,{className:"w-12 h-12 text-gray-400 mx-auto mb-2 animate-pulse"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Loading markdown..."})]})}):r.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(i.NOg,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Markdown File"})]})})});if(k.startsWith("text/"))return r.jsx("div",{className:"flex items-center justify-center bg-gray-50 h-full",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(i.NOg,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Text File"})]})});let e=(k.startsWith("video/")||k.startsWith("audio/"),i.tHe);return r.jsx("div",{className:"flex items-center justify-center bg-gray-100 h-full",children:e===i.tHe?r.jsx(i.tHe,{className:"w-12 h-12 text-gray-400"}):null})})()}):r.jsx("div",{className:`flex items-center justify-center bg-gray-100 ${o}`,children:r.jsx(i.tHe,{className:"w-12 h-12 text-gray-400"})})}s(12330)},17512:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2772).createProxy)(String.raw`/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/artifacts/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[257,138,292,920,501],()=>s(76649));module.exports=r})();