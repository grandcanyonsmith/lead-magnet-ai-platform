(()=>{var e={};e.id=680,e.ids=[680],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},14364:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(77017),t(20094),t(75966),t(12874);var r=t(27105),a=t(15265),i=t(90157),l=t.n(i),o=t(44665),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(s,n);let d=["",{children:["dashboard",{children:["forms",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,77017)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/forms/[id]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,20094)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,75966)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,12874,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/forms/[id]/edit/page.tsx"],u="/dashboard/forms/[id]/edit/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/forms/[id]/edit/page",pathname:"/dashboard/forms/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},61562:(e,s,t)=>{Promise.resolve().then(t.bind(t,36626))},36626:(e,s,t)=>{"use strict";t.d(s,{default:()=>n});var r=t(19899),a=t(5507),i=t(76153),l=t(12330),o=t(55562);function n(){let e=(0,i.useRouter)(),s=(0,i.useParams)(),t=(()=>{let e=s?.id;return e&&"_"!==e?e:e||""})(),[n,d]=(0,a.useState)(!0),[c,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(null),[h,b]=(0,a.useState)({form_name:"",public_slug:"",form_fields_schema:{fields:[]},rate_limit_enabled:!0,rate_limit_per_hour:10,captcha_enabled:!1,custom_css:"",thank_you_message:"",redirect_url:""}),p=async s=>{if(s.preventDefault(),x(null),!h.form_name.trim()){x("Form name is required");return}if(!h.public_slug.trim()){x("Public URL slug is required");return}u(!0);try{await l.hi.updateForm(t,{form_name:h.form_name.trim(),public_slug:h.public_slug.trim(),form_fields_schema:h.form_fields_schema,rate_limit_enabled:h.rate_limit_enabled,rate_limit_per_hour:h.rate_limit_per_hour,captcha_enabled:h.captcha_enabled,custom_css:h.custom_css.trim()||void 0,thank_you_message:h.thank_you_message.trim()||void 0,redirect_url:h.redirect_url.trim()||void 0}),e.push("/dashboard/workflows")}catch(e){console.error("Failed to update form:",e),x(e.response?.data?.message||e.message||"Failed to update form")}finally{u(!1)}},f=(e,s)=>{b(t=>({...t,[e]:s}))},g=(e,s,t)=>{b(r=>{let a=[...r.form_fields_schema.fields];return a[e]={...a[e],[s]:t},{...r,form_fields_schema:{...r.form_fields_schema,fields:a}}})},_=e=>{b(s=>{let t=[...s.form_fields_schema.fields];return t.splice(e,1),{...s,form_fields_schema:{...s.form_fields_schema,fields:t}}})};return n?r.jsx("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"h-8 bg-ink-200 rounded w-48 animate-pulse"}),r.jsx("div",{className:"bg-white rounded-2xl shadow-soft border border-white/60 p-6",children:r.jsx("div",{className:"h-64 bg-ink-100 rounded-2xl animate-pulse"})})]})}):m&&!h.form_name?(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center text-ink-600 hover:text-ink-900 mb-4 py-2 rounded-2xl px-2",children:[r.jsx(o.Ao2,{className:"w-4 h-4 mr-2"}),"Back"]})}),r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-2xl shadow-soft",children:m})]}):(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center text-ink-600 hover:text-ink-900 mb-4 py-2 touch-target rounded-2xl px-2",children:[r.jsx(o.Ao2,{className:"w-4 h-4 mr-2"}),"Back"]}),m&&r.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-2xl shadow-soft",children:m}),r.jsx("h1",{className:"text-2xl font-bold text-ink-900",children:"Edit Form"}),r.jsx("p",{className:"text-ink-600 mt-1",children:"Update your lead capture form settings"})]}),(0,r.jsxs)("form",{onSubmit:p,className:"bg-white rounded-2xl shadow-soft border border-white/60 p-6 sm:p-8 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-ink-800 mb-2",children:["Form Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:h.form_name,onChange:e=>f("form_name",e.target.value),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 placeholder-ink-400 shadow-soft",placeholder:"Lead Magnet Form",maxLength:200,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-ink-800 mb-2",children:["Public URL Slug ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:h.public_slug,onChange:e=>f("public_slug",e.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 placeholder-ink-400 shadow-soft font-mono text-sm",placeholder:"lead-magnet-form",pattern:"[a-z0-9-]+",required:!0}),r.jsx("p",{className:"mt-1 text-xs text-ink-500",children:"URL-friendly identifier. Only lowercase letters, numbers, and hyphens allowed."}),h.public_slug&&(0,r.jsxs)("p",{className:"mt-1 text-xs text-brand-600",children:["Form URL: ",`/v1/forms/${h.public_slug}`]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-ink-800",children:"Form Fields"}),r.jsx("button",{type:"button",onClick:()=>{b(e=>({...e,form_fields_schema:{...e.form_fields_schema,fields:[...e.form_fields_schema.fields,{field_id:`field_${Date.now()}`,field_type:"text",label:"",placeholder:"",required:!1}]}}))},className:"text-sm text-brand-600 hover:text-brand-700 py-2 px-2 touch-target rounded-2xl",children:"+ Add Field"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[h.form_fields_schema.fields.map((e,s)=>(0,r.jsxs)("div",{className:"border border-white/60 rounded-2xl p-4 space-y-3 bg-white/80 shadow-soft",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Field Type"}),(0,r.jsxs)("select",{value:e.field_type,onChange:e=>g(s,"field_type",e.target.value),className:"w-full px-3 py-2 text-sm border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"email",children:"Email"}),r.jsx("option",{value:"tel",children:"Phone"}),r.jsx("option",{value:"textarea",children:"Textarea"}),r.jsx("option",{value:"select",children:"Select"}),r.jsx("option",{value:"number",children:"Number"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Label"}),r.jsx("input",{type:"text",value:e.label,onChange:e=>g(s,"label",e.target.value),className:"w-full px-3 py-2 text-sm border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",placeholder:"Field Label"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Placeholder"}),r.jsx("input",{type:"text",value:e.placeholder||"",onChange:e=>g(s,"placeholder",e.target.value),className:"w-full px-3 py-2 text-sm border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",placeholder:"Placeholder text"})]}),"select"===e.field_type&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Options (comma-separated)"}),r.jsx("input",{type:"text",value:e.options?.join(", ")||"",onChange:e=>g(s,"options",e.target.value.split(",").map(e=>e.trim()).filter(e=>e)),className:"w-full px-3 py-2 text-sm border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",placeholder:"Option 1, Option 2, Option 3"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:e.required,onChange:e=>g(s,"required",e.target.checked),className:"mr-2 accent-brand-600"}),r.jsx("span",{className:"text-xs text-ink-700",children:"Required"})]}),r.jsx("button",{type:"button",onClick:()=>_(s),className:"text-xs text-red-600 hover:text-red-700 py-2 px-2 touch-target rounded-2xl",children:"Remove"})]})]},e.field_id||s)),0===h.form_fields_schema.fields.length&&r.jsx("p",{className:"text-sm text-ink-500 text-center py-4",children:"No custom fields. Name, email, and phone are always included."})]})]}),(0,r.jsxs)("div",{className:"border-t border-white/60 pt-6 space-y-4",children:[r.jsx("div",{children:(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:h.rate_limit_enabled,onChange:e=>f("rate_limit_enabled",e.target.checked),className:"mr-2 accent-brand-600"}),r.jsx("span",{className:"text-sm font-semibold text-ink-800",children:"Enable Rate Limiting"})]})}),h.rate_limit_enabled&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-ink-800 mb-2",children:"Submissions Per Hour"}),r.jsx("input",{type:"number",value:h.rate_limit_per_hour,onChange:e=>f("rate_limit_per_hour",parseInt(e.target.value)||10),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",min:1,max:1e3})]}),r.jsx("div",{children:(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:h.captcha_enabled,onChange:e=>f("captcha_enabled",e.target.checked),className:"mr-2 accent-brand-600"}),r.jsx("span",{className:"text-sm font-semibold text-ink-800",children:"Enable CAPTCHA"})]})})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-ink-800 mb-2",children:"Thank You Message"}),r.jsx("textarea",{value:h.thank_you_message,onChange:e=>f("thank_you_message",e.target.value),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",placeholder:"Thank you! Your submission is being processed.",rows:3})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-ink-800 mb-2",children:"Redirect URL (optional)"}),r.jsx("input",{type:"url",value:h.redirect_url,onChange:e=>f("redirect_url",e.target.value),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",placeholder:"https://example.com/thank-you"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-ink-800 mb-2",children:"Custom CSS (optional)"}),r.jsx("textarea",{value:h.custom_css,onChange:e=>f("custom_css",e.target.value),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft font-mono text-sm",placeholder:"/* Custom CSS styles */",rows:6})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4 pt-4 border-t border-white/60",children:[r.jsx("button",{type:"button",onClick:()=>e.back(),className:"px-6 py-3 border border-white/60 rounded-2xl text-ink-700 bg-white hover:bg-surface-50 transition-colors touch-target shadow-soft",children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",disabled:c,className:"flex items-center justify-center px-6 py-3 bg-brand-600 text-white rounded-2xl hover:bg-brand-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed touch-target shadow-soft",children:[r.jsx(o.mW3,{className:"w-5 h-5 mr-2"}),c?"Saving...":"Save Changes"]})]})]})]})}},77017:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l,generateStaticParams:()=>i});var r=t(35023);let a=(0,t(2772).createProxy)(String.raw`/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/forms/[id]/edit/page-client.tsx#default`);async function i(){return[{id:"_"}]}function l(){return r.jsx(a,{})}}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[257,138,920,501],()=>t(14364));module.exports=r})();