(()=>{var e={};e.id=91,e.ids=[91],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},17088:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(21874),s(20094),s(75966),s(12874);var r=s(27105),a=s(15265),l=s(90157),o=s.n(l),i=s(44665),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);s.d(t,n);let d=["",{children:["dashboard",{children:["forms",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,21874)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/forms/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,20094)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,75966)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,12874,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/forms/new/page.tsx"],u="/dashboard/forms/new/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/forms/new/page",pathname:"/dashboard/forms/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},26483:(e,t,s)=>{Promise.resolve().then(s.bind(s,236))},236:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(19899),a=s(5507),l=s(76153),o=s(12330),i=s(55562);function n(){let e=(0,l.useRouter)();(0,l.useSearchParams)();let[t,s]=(0,a.useState)(!1),[n,d]=(0,a.useState)(null),[c,u]=(0,a.useState)({workflow_id:"",form_name:"",public_slug:"",form_fields_schema:{fields:[]},rate_limit_enabled:!0,rate_limit_per_hour:10,captcha_enabled:!1,custom_css:"",thank_you_message:"",redirect_url:""}),m=async t=>{if(t.preventDefault(),d(null),!c.form_name.trim()){d("Form name is required");return}if(!c.public_slug.trim()){d("Public URL slug is required");return}if(!c.workflow_id.trim()){d("Workflow ID is required. Please provide a workflow_id in the URL or select a workflow.");return}s(!0);try{await o.hi.createForm({workflow_id:c.workflow_id.trim(),form_name:c.form_name.trim(),public_slug:c.public_slug.trim(),form_fields_schema:c.form_fields_schema,rate_limit_enabled:c.rate_limit_enabled,rate_limit_per_hour:c.rate_limit_per_hour,captcha_enabled:c.captcha_enabled,custom_css:c.custom_css.trim()||void 0,thank_you_message:c.thank_you_message.trim()||void 0,redirect_url:c.redirect_url.trim()||void 0}),e.push("/dashboard/workflows")}catch(e){console.error("Failed to create form:",e),d(e.response?.data?.message||e.message||"Failed to create form")}finally{s(!1)}},x=(e,t)=>{u(s=>({...s,[e]:t}))},h=(e,t,s)=>{u(r=>{let a=[...r.form_fields_schema.fields];return a[e]={...a[e],[t]:s},{...r,form_fields_schema:{...r.form_fields_schema,fields:a}}})},b=e=>{u(t=>{let s=[...t.form_fields_schema.fields];return s.splice(e,1),{...t,form_fields_schema:{...t.form_fields_schema,fields:s}}})};return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center text-ink-600 hover:text-ink-900 mb-4 py-2 touch-target rounded-2xl px-2",children:[r.jsx(i.Ao2,{className:"w-4 h-4 mr-2"}),"Back"]}),n&&r.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-2xl shadow-soft",children:n}),r.jsx("h1",{className:"text-2xl font-bold text-ink-900",children:"Create New Form"}),r.jsx("p",{className:"text-ink-600 mt-1",children:"Create a new lead capture form"})]}),(0,r.jsxs)("form",{onSubmit:m,className:"bg-white rounded-2xl shadow-soft border border-white/60 p-6 sm:p-8 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-ink-800 mb-2",children:["Form Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:c.form_name,onChange:e=>x("form_name",e.target.value),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 placeholder-ink-400 shadow-soft",placeholder:"Lead Magnet Form",maxLength:200,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-ink-800 mb-2",children:["Public URL Slug ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:c.public_slug,onChange:e=>x("public_slug",e.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 placeholder-ink-400 shadow-soft font-mono text-sm",placeholder:"lead-magnet-form",pattern:"[a-z0-9-]+",required:!0}),r.jsx("p",{className:"mt-1 text-xs text-ink-500",children:"URL-friendly identifier. Only lowercase letters, numbers, and hyphens allowed."}),c.public_slug&&(0,r.jsxs)("p",{className:"mt-1 text-xs text-brand-600",children:["Form URL: ",`/v1/forms/${c.public_slug}`]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-ink-800",children:"Form Fields"}),r.jsx("button",{type:"button",onClick:()=>{u(e=>({...e,form_fields_schema:{...e.form_fields_schema,fields:[...e.form_fields_schema.fields,{field_id:`field_${Date.now()}`,field_type:"text",label:"",placeholder:"",required:!1}]}}))},className:"text-sm text-brand-600 hover:text-brand-700 py-2 px-2 touch-target rounded-2xl",children:"+ Add Field"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[c.form_fields_schema.fields.map((e,t)=>(0,r.jsxs)("div",{className:"border border-white/60 rounded-2xl p-4 space-y-3 bg-white/80 shadow-soft",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Field Type"}),(0,r.jsxs)("select",{value:e.field_type,onChange:e=>h(t,"field_type",e.target.value),className:"w-full px-3 py-2 text-sm border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"email",children:"Email"}),r.jsx("option",{value:"tel",children:"Phone"}),r.jsx("option",{value:"textarea",children:"Textarea"}),r.jsx("option",{value:"select",children:"Select"}),r.jsx("option",{value:"number",children:"Number"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Label"}),r.jsx("input",{type:"text",value:e.label,onChange:e=>h(t,"label",e.target.value),className:"w-full px-3 py-2 text-sm border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",placeholder:"Field Label"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Placeholder"}),r.jsx("input",{type:"text",value:e.placeholder||"",onChange:e=>h(t,"placeholder",e.target.value),className:"w-full px-3 py-2 text-sm border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",placeholder:"Placeholder text"})]}),"select"===e.field_type&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-ink-700 mb-1",children:"Options (comma-separated)"}),r.jsx("input",{type:"text",value:e.options?.join(", ")||"",onChange:e=>h(t,"options",e.target.value.split(",").map(e=>e.trim()).filter(e=>e)),className:"w-full px-3 py-2 text-sm border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",placeholder:"Option 1, Option 2, Option 3"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:e.required,onChange:e=>h(t,"required",e.target.checked),className:"mr-2 accent-brand-600"}),r.jsx("span",{className:"text-xs text-ink-700",children:"Required"})]}),r.jsx("button",{type:"button",onClick:()=>b(t),className:"text-xs text-red-600 hover:text-red-700 py-2 px-2 touch-target rounded-2xl",children:"Remove"})]})]},e.field_id||t)),0===c.form_fields_schema.fields.length&&r.jsx("p",{className:"text-sm text-ink-500 text-center py-4",children:"No custom fields. Name, email, and phone are always included."})]})]}),(0,r.jsxs)("div",{className:"border-t pt-6 space-y-4",children:[r.jsx("div",{children:(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:c.rate_limit_enabled,onChange:e=>x("rate_limit_enabled",e.target.checked),className:"mr-2 accent-brand-600"}),r.jsx("span",{className:"text-sm font-semibold text-ink-800",children:"Enable Rate Limiting"})]})}),c.rate_limit_enabled&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-ink-800 mb-2",children:"Submissions Per Hour"}),r.jsx("input",{type:"number",value:c.rate_limit_per_hour,onChange:e=>x("rate_limit_per_hour",parseInt(e.target.value)||10),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",min:1,max:1e3})]}),r.jsx("div",{children:(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:c.captcha_enabled,onChange:e=>x("captcha_enabled",e.target.checked),className:"mr-2 accent-brand-600"}),r.jsx("span",{className:"text-sm font-semibold text-ink-800",children:"Enable CAPTCHA"})]})})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-ink-800 mb-2",children:"Thank You Message"}),r.jsx("textarea",{value:c.thank_you_message,onChange:e=>x("thank_you_message",e.target.value),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",placeholder:"Thank you! Your submission is being processed.",rows:3})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-ink-800 mb-2",children:"Redirect URL (optional)"}),r.jsx("input",{type:"url",value:c.redirect_url,onChange:e=>x("redirect_url",e.target.value),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft",placeholder:"https://example.com/thank-you"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-ink-800 mb-2",children:"Custom CSS (optional)"}),r.jsx("textarea",{value:c.custom_css,onChange:e=>x("custom_css",e.target.value),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 shadow-soft font-mono text-sm",placeholder:"/* Custom CSS styles */",rows:6})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4 pt-4 border-t border-white/60",children:[r.jsx("button",{type:"button",onClick:()=>e.back(),className:"px-6 py-3 border border-white/60 rounded-2xl text-ink-700 bg-white hover:bg-surface-50 transition-colors touch-target shadow-soft",children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",disabled:t,className:"flex items-center justify-center px-6 py-3 bg-brand-600 text-white rounded-2xl hover:bg-brand-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed touch-target shadow-soft",children:[r.jsx(i.mW3,{className:"w-5 h-5 mr-2"}),t?"Creating...":"Create Form"]})]})]})]})}},21874:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(35023),a=s(58003);let l=(0,s(2772).createProxy)(String.raw`/Users/canyonsmith/lead-magnent-ai/frontend/src/app/dashboard/forms/new/page-client.tsx#default`);function o(){return r.jsx(a.Suspense,{fallback:r.jsx("div",{children:"Loading..."}),children:r.jsx(l,{})})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[257,138,920,501],()=>s(17088));module.exports=r})();