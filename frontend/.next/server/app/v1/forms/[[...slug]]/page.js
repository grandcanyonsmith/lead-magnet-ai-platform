(()=>{var e={};e.id=837,e.ids=[837],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},31489:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>x,tree:()=>d}),s(36498),s(75966),s(12874);var r=s(27105),a=s(15265),n=s(90157),i=s.n(n),l=s(44665),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["v1",{children:["forms",{children:["[[...slug]]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,36498)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/v1/forms/[[...slug]]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,75966)),"/Users/canyonsmith/lead-magnent-ai/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,12874,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/canyonsmith/lead-magnent-ai/frontend/src/app/v1/forms/[[...slug]]/page.tsx"],c="/v1/forms/[[...slug]]/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/v1/forms/[[...slug]]/page",pathname:"/v1/forms/[[...slug]]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},14444:(e,t,s)=>{Promise.resolve().then(s.bind(s,98720))},98720:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(19899),a=s(5507),n=s(76153),i=s(20751);let l="http://localhost:3001";function o(){let e=(0,n.useParams)(),[t,s]=(0,a.useState)((()=>{let t=e?.slug,s=Array.isArray(t)?t[0]:t;return s&&"_"!==s&&""!==s.trim()?s:s||""})()),[o,d]=(0,a.useState)(null),[u,c]=(0,a.useState)(!0),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[b,f]=(0,a.useState)(!1),[g,j]=(0,a.useState)({}),[_,v]=(0,a.useState)(!1),[y,w]=(0,a.useState)(null),[k,N]=(0,a.useState)(null),[q,P]=(0,a.useState)(null),S=async e=>{e.preventDefault(),p(null),f(!1),x(!0),v(!1),w(null),N(null),P(null);try{let e=await i.Z.post(`${l}/v1/forms/${t}/submit`,{submission_data:g});f(!0),e.data.job_id&&(w(e.data.job_id),v(!0),N("pending"),L(e.data.job_id)),e.data.redirect_url&&!e.data.job_id&&setTimeout(()=>{window.location.href=e.data.redirect_url},2e3)}catch(e){console.error("Failed to submit form:",e),p(e.response?.data?.message||e.message||"Failed to submit form")}finally{x(!1)}},L=async e=>{let t=0,s=async()=>{try{let r=await i.Z.get(`${l}/v1/jobs/${e}/status`),a=r.data.status;if(N(a),"completed"===a){v(!1),r.data.output_url&&P(r.data.output_url);return}if("failed"===a){v(!1),p(r.data.error_message||"Lead magnet generation failed");return}("pending"===a||"processing"===a)&&(++t<180?setTimeout(s,1e3):(v(!1),p("Generation is taking longer than expected. Please check back later.")))}catch(e){console.warn("Could not poll job status:",e),++t<180?setTimeout(s,2e3):(v(!1),N("unknown"))}};setTimeout(s,1e3)},C=(e,t)=>{j(s=>({...s,[e]:t}))},F=e=>{let t=g[e.field_id]||"";switch(e.field_type){case"textarea":return r.jsx("textarea",{id:e.field_id,value:t,onChange:t=>C(e.field_id,t.target.value),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 placeholder-ink-400 shadow-soft",placeholder:e.placeholder,required:e.required,maxLength:e.max_length,rows:4});case"select":return(0,r.jsxs)("select",{id:e.field_id,value:t,onChange:t=>C(e.field_id,t.target.value),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 placeholder-ink-400 shadow-soft",required:e.required,children:[r.jsx("option",{value:"",children:"Select an option..."}),e.options?.map(e=>r.jsx("option",{value:e,children:e},e))]});case"checkbox":return(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:e.field_id,checked:t||!1,onChange:t=>C(e.field_id,t.target.checked),className:"w-4 h-4 text-brand-600 border-white/60 rounded focus:ring-brand-500",required:e.required}),r.jsx("label",{htmlFor:e.field_id,className:"ml-2 text-sm text-ink-700",children:e.label})]});default:return r.jsx("input",{type:"email"===e.field_type?"email":"tel"===e.field_type?"tel":"number"===e.field_type?"number":"text",id:e.field_id,value:t,onChange:t=>C(e.field_id,t.target.value),className:"w-full px-4 py-3 border border-white/60 rounded-2xl bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-ink-900 placeholder-ink-400 shadow-soft",placeholder:e.placeholder,required:e.required,maxLength:e.max_length,pattern:e.validation_regex})}};return u?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface-50 px-4",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-sm sm:text-base text-ink-600",children:"Loading form..."})})}):h&&!o?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface-50 px-4 sm:px-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft border border-white/60 p-6 sm:p-8 max-w-md w-full",children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-ink-900 mb-3 sm:mb-4",children:"Form Not Found"}),r.jsx("p",{className:"text-sm sm:text-base text-ink-600",children:h})]})}):b?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface-50 px-4 sm:px-6",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-soft border border-white/60 p-6 sm:p-8 max-w-md w-full text-center",children:_?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"mb-4",children:r.jsx("div",{className:"mx-auto h-10 w-10 sm:h-12 sm:w-12 border-4 border-brand-200 border-t-brand-600 rounded-full animate-spin"})}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-ink-900 mb-3 sm:mb-4",children:"Generating Your Lead Magnet..."}),r.jsx("p",{className:"text-sm sm:text-base text-ink-600 mb-3 sm:mb-4 px-2",children:o?.thank_you_message||"Your submission has been received. We&apos;re generating your personalized lead magnet now."}),k&&(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-ink-500 mb-3 sm:mb-4",children:["Status: ","pending"===k?"Queued":"processing"===k?"Processing":k]}),r.jsx("p",{className:"text-xs text-ink-400 px-2",children:"This may take a minute. Please don't close this page."})]}):q?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"mb-4",children:r.jsx("svg",{className:"mx-auto h-10 w-10 sm:h-12 sm:w-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-ink-900 mb-3 sm:mb-4",children:"Your Lead Magnet is Ready!"}),r.jsx("p",{className:"text-sm sm:text-base text-ink-600 mb-4 sm:mb-6 px-2",children:o?.thank_you_message||"Your personalized lead magnet has been generated successfully."}),r.jsx("a",{href:q,target:"_blank",rel:"noopener noreferrer",className:"inline-block w-full sm:w-auto px-6 py-3 bg-brand-600 text-white rounded-2xl hover:bg-brand-700 transition-colors font-medium text-sm sm:text-base",children:"View Your Lead Magnet"}),o?.redirect_url&&r.jsx("div",{className:"mt-4",children:(0,r.jsxs)("a",{href:o.redirect_url,className:"text-xs sm:text-sm text-brand-600 hover:text-brand-700 break-all",children:["Continue to ",o.redirect_url]})})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"mb-4",children:r.jsx("svg",{className:"mx-auto h-10 w-10 sm:h-12 sm:w-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-ink-900 mb-3 sm:mb-4",children:"Thank You!"}),r.jsx("p",{className:"text-sm sm:text-base text-ink-600 mb-3 sm:mb-4 px-2",children:o?.thank_you_message||"Your submission has been received and is being processed."}),o?.redirect_url&&r.jsx("p",{className:"text-xs sm:text-sm text-ink-500",children:"Redirecting..."})]})})}):o?r.jsx("div",{className:"min-h-screen bg-surface-50 py-6 sm:py-12 px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"max-w-2xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft border border-white/60 p-4 sm:p-6 lg:p-8",children:[o.logo_url&&r.jsx("div",{className:"mb-4 sm:mb-6 text-center",children:r.jsx("img",{src:o.logo_url,alt:"Logo",className:"max-h-16 sm:max-h-20 mx-auto",onError:e=>{e.currentTarget.style.display="none"}})}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-ink-900 mb-2 sm:mb-3",children:o.form_name}),h&&r.jsx("div",{className:"mb-4 sm:mb-6 bg-red-50 border border-red-200 text-red-700 px-3 sm:px-4 py-2 sm:py-3 rounded-2xl text-sm sm:text-base",children:h}),(0,r.jsxs)("form",{onSubmit:S,className:"space-y-4 sm:space-y-6",children:[o.form_fields_schema?.fields?.map(e=>r.jsxs("div",{children:["checkbox"!==e.field_type&&r.jsxs("label",{htmlFor:e.field_id,className:"block text-sm font-medium text-ink-700 mb-1.5 sm:mb-2",children:[e.label,e.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),F(e),"checkbox"===e.field_type&&!e.required&&r.jsx("span",{className:"text-xs text-ink-500 ml-6",children:"Optional"})]},e.field_id)),r.jsx("div",{className:"pt-3 sm:pt-4",children:r.jsx("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-2.5 sm:py-3 px-4 border border-white/60 rounded-2xl shadow-soft text-sm sm:text-base font-medium text-white bg-brand-600 hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Submitting...":"Submit"})})]}),o.custom_css&&r.jsx("style",{dangerouslySetInnerHTML:{__html:o.custom_css}})]})})}):null}},76153:(e,t,s)=>{"use strict";var r=s(81545);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},36498:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,generateStaticParams:()=>n});var r=s(35023);let a=(0,s(2772).createProxy)(String.raw`/Users/canyonsmith/lead-magnent-ai/frontend/src/app/v1/forms/[[...slug]]/page-client.tsx#default`);async function n(){return[{slug:["_"]}]}function i(){return r.jsx(a,{})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[257,920],()=>s(31489));module.exports=r})();