"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9742],{91309:function(e,t,s){s.d(t,{E:function(){return d}});var o=s(37821),r=s(58078),l=s(77851),n=s(63951);function i(e){let{original:t,proposed:s,action:r,onAccept:n,onReject:i,isLoading:a=!1}=e,d=e=>null==e?"(not set)":Array.isArray(e)?0===e.length?"(none)":e.map(e=>"object"==typeof e?e.type||JSON.stringify(e):e).join(", "):"string"==typeof e?""===e.trim()?"(empty)":e.length>100?e.substring(0,100)+"...":e:String(e),c=(()=>{if("add"===r)return[{field:"step_name",label:"Step Name",from:null,to:s.step_name},{field:"step_description",label:"Description",from:null,to:s.step_description},{field:"model",label:"Model",from:null,to:s.model},{field:"instructions",label:"Instructions",from:null,to:s.instructions},{field:"tools",label:"Tools",from:null,to:s.tools},{field:"tool_choice",label:"Tool Choice",from:null,to:s.tool_choice}].filter(e=>e.to);let e=[];return(null==t?void 0:t.step_name)!==s.step_name&&e.push({field:"step_name",label:"Step Name",from:null==t?void 0:t.step_name,to:s.step_name}),(null==t?void 0:t.step_description)!==s.step_description&&e.push({field:"step_description",label:"Description",from:null==t?void 0:t.step_description,to:s.step_description}),(null==t?void 0:t.model)!==s.model&&e.push({field:"model",label:"Model",from:null==t?void 0:t.model,to:s.model}),(null==t?void 0:t.instructions)!==s.instructions&&e.push({field:"instructions",label:"Instructions",from:null==t?void 0:t.instructions,to:s.instructions}),JSON.stringify(null==t?void 0:t.tools)!==JSON.stringify(s.tools)&&e.push({field:"tools",label:"Tools",from:null==t?void 0:t.tools,to:s.tools}),(null==t?void 0:t.tool_choice)!==s.tool_choice&&e.push({field:"tool_choice",label:"Tool Choice",from:null==t?void 0:t.tool_choice,to:s.tool_choice}),JSON.stringify(null==t?void 0:t.depends_on)!==JSON.stringify(s.depends_on)&&e.push({field:"depends_on",label:"Dependencies",from:null==t?void 0:t.depends_on,to:s.depends_on}),e})();return(0,o.jsxs)("div",{className:"border-2 border-primary-200 rounded-lg bg-primary-50 p-4",children:[(0,o.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-sm font-semibold text-primary-900 mb-1",children:"add"===r?"✨ New Step Proposed":"✨ Changes Proposed by AI"}),(0,o.jsx)("p",{className:"text-xs text-primary-700",children:"add"===r?"Review the proposed step configuration below":"".concat(c.length," field").concat(1===c.length?"":"s"," will be updated")})]})}),0===c.length&&"update"===r&&(0,o.jsx)("div",{className:"text-sm text-primary-700 mb-4",children:"No changes detected"}),c.length>0&&(0,o.jsx)("div",{className:"space-y-3 mb-4",children:c.map((e,t)=>(0,o.jsxs)("div",{className:"bg-white rounded border border-primary-200 p-3",children:[(0,o.jsx)("div",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:e.label}),"update"===r&&null!==e.from&&(0,o.jsxs)("div",{className:"flex items-start gap-2 text-sm mb-1",children:[(0,o.jsx)("span",{className:"text-red-600 font-medium min-w-[60px]",children:"Before:"}),(0,o.jsx)("span",{className:"text-red-700 bg-red-50 px-2 py-1 rounded flex-1 break-words",children:d(e.from)})]}),(0,o.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,o.jsx)("span",{className:"text-green-600 font-medium min-w-[60px]",children:"add"===r?"Value:":"After:"}),(0,o.jsx)("span",{className:"text-green-700 bg-green-50 px-2 py-1 rounded flex-1 break-words",children:d(e.to)})]})]},t))}),(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsxs)("button",{onClick:n,disabled:a,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm transition-colors",children:[(0,o.jsx)(l.UgA,{className:"w-4 h-4"}),"add"===r?"Add This Step":"Apply Changes"]}),(0,o.jsxs)("button",{onClick:i,disabled:a,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm transition-colors",children:[(0,o.jsx)(l.q5L,{className:"w-4 h-4"}),"Reject"]})]})]})}var a=s(16028);function d(e){let{workflowId:t,step:s,stepIndex:d,onAccept:c}=e,[u,p]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),{isGenerating:x,error:b,proposal:g,generateStep:f,acceptProposal:y,rejectProposal:_}=function(e){let[t,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[i,a]=(0,r.useState)(null),d=async(t,o,r,i)=>{if(!e)return l("Workflow ID is required for AI generation"),null;s(!0),l(null),a(null);try{let s=await n.hi.generateStepWithAI(e,{userPrompt:t,action:i,currentStep:o,currentStepIndex:r}),l={original:o,proposed:s.step,action:s.action,step_index:s.step_index};return a(l),l}catch(e){return console.error("[useWorkflowStepAI] Generation failed",{error:e.message}),l(e.message||"Failed to generate step. Please try again."),null}finally{s(!1)}},c=async(e,t,s,o)=>await d(e,t,s,o);return{isGenerating:t,error:o,proposal:i,generateStep:d,acceptProposal:()=>(a(null),i),rejectProposal:()=>{a(null)},retry:c}}(t),v=async()=>{if(!f||!u.trim()){a.ZP.error("Please enter a prompt");return}try{await f(u,s,d,"update")}catch(e){a.ZP.error(b||"Failed to generate step configuration")}};return t?(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsxs)("button",{type:"button",onClick:()=>h(!m),className:"w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg hover:from-purple-100 hover:to-blue-100 transition-colors",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(l.Wqx,{className:"w-5 h-5 text-purple-600"}),(0,o.jsx)("span",{className:"font-semibold text-purple-900",children:"AI Assist"}),(0,o.jsx)("span",{className:"text-xs text-purple-600 bg-purple-100 px-2 py-1 rounded-full",children:"Beta"})]}),m?(0,o.jsx)(l.rH8,{className:"w-5 h-5 text-purple-600"}):(0,o.jsx)(l.bTu,{className:"w-5 h-5 text-purple-600"})]}),m&&(0,o.jsxs)("div",{className:"mt-3 p-4 border border-purple-200 rounded-lg bg-white",children:[(0,o.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Describe how you want to change this step, and AI will generate an updated configuration for you to review."}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would you like to change?"}),(0,o.jsx)("textarea",{value:u,onChange:e=>p(e.target.value),placeholder:"e.g., 'Change the model to GPT-4o and add web search tool' or 'Update instructions to focus on competitive analysis'",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm",rows:3,disabled:x})]}),(0,o.jsx)("button",{type:"button",onClick:v,disabled:!u.trim()||x,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm transition-colors",children:x?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.Wqx,{className:"w-4 h-4"}),"Generate with AI"]})}),b&&(0,o.jsx)("div",{className:"text-sm text-red-600 bg-red-50 px-3 py-2 rounded border border-red-200",children:b}),g&&(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)(i,{original:g.original,proposed:g.proposed,action:g.action,onAccept:()=>{if(!g||!y)return;let e=y();if(e){let{proposed:t}=e;c(t),p(""),a.ZP.success("AI changes applied successfully")}},onReject:()=>{_&&(_(),p(""),(0,a.ZP)("AI proposal rejected"))},isLoading:!1})})]})]})]}):null}},69526:function(e,t,s){s.d(t,{b:function(){return l}});var o=s(37821);let r=[{value:"gpt-5",label:"GPT-5"},{value:"gpt-4.1",label:"GPT-4.1"},{value:"gpt-4o",label:"GPT-4o"},{value:"gpt-4-turbo",label:"GPT-4 Turbo"},{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo"},{value:"computer-use-preview",label:"Computer Use Preview"}];function l(e){let{step:t,onChange:s}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Name *"}),(0,o.jsx)("input",{type:"text",value:t.step_name,onChange:e=>s("step_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Deep Research",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Description (optional)"}),(0,o.jsx)("textarea",{value:t.step_description||"",onChange:e=>s("step_description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Brief description of what this step does",rows:2})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Type *"}),(0,o.jsxs)("select",{value:t.step_type||"ai_generation",onChange:e=>{e.stopPropagation();let o=e.target.value;console.log("[StepBasicFields] Changing step_type to:",o,"Current step:",t),s("step_type",o),"webhook"===o&&(console.log("[StepBasicFields] Initializing webhook fields"),s("webhook_data_selection",{include_submission:!0,exclude_step_indices:[],include_job_info:!0}),s("webhook_url",""),s("webhook_headers",{}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,o.jsx)("option",{value:"ai_generation",children:"AI Generation"}),(0,o.jsx)("option",{value:"webhook",children:"Webhook"})]})]}),("ai_generation"===t.step_type||!t.step_type)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Model *"}),(0,o.jsx)("select",{value:t.model,onChange:e=>s("model",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:r.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions *"}),(0,o.jsx)("textarea",{value:t.instructions,onChange:e=>s("instructions",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Detailed instructions for what this step should do...",rows:6,required:!0}),(0,o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"These instructions will be passed to the AI model along with context from previous steps."})]})]})]})}},16058:function(e,t,s){s.d(t,{b:function(){return n}});var o=s(37821);let r=[{value:"web_search",label:"Web Search",description:"Web search capabilities (newer version)"},{value:"web_search_preview",label:"Web Search Preview",description:"Web search preview capabilities"},{value:"image_generation",label:"Image Generation",description:"Generate images from text descriptions"},{value:"computer_use_preview",label:"Computer Use Preview",description:"Control computer interfaces (requires configuration)"},{value:"file_search",label:"File Search",description:"Search uploaded files for context"},{value:"code_interpreter",label:"Code Interpreter",description:"Execute Python code in a secure sandbox"}],l=[{value:"auto",label:"Auto",description:"Model decides when to use tools"},{value:"required",label:"Required",description:"Model must use at least one tool"},{value:"none",label:"None",description:"Disable tools entirely"}];function n(e){let{step:t,isToolSelected:s,onToolToggle:n,onToolChoiceChange:i,onComputerUseConfigChange:a,computerUseConfig:d}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"OpenAI Tools"}),(0,o.jsx)("div",{className:"space-y-2 mb-3",children:r.map(e=>(0,o.jsxs)("label",{className:"flex items-start space-x-2 cursor-pointer",children:[(0,o.jsx)("input",{type:"checkbox",checked:s(e.value),onChange:()=>n(e.value),className:"mt-1 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]},e.value))}),s("computer_use_preview")&&a&&d&&(0,o.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Computer Use Preview Configuration"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Display Width"}),(0,o.jsx)("input",{type:"number",value:d.display_width,onChange:e=>a("display_width",parseInt(e.target.value)||1024),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",min:"100",max:"4096"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Display Height"}),(0,o.jsx)("input",{type:"number",value:d.display_height,onChange:e=>a("display_height",parseInt(e.target.value)||768),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",min:"100",max:"4096"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Environment"}),(0,o.jsxs)("select",{value:d.environment,onChange:e=>a("environment",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",children:[(0,o.jsx)("option",{value:"browser",children:"Browser"}),(0,o.jsx)("option",{value:"mac",children:"macOS"}),(0,o.jsx)("option",{value:"windows",children:"Windows"}),(0,o.jsx)("option",{value:"ubuntu",children:"Ubuntu"})]})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tool Choice"}),(0,o.jsx)("select",{value:t.tool_choice||"auto",onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:l.map(e=>(0,o.jsxs)("option",{value:e.value,children:[e.label," - ",e.description]},e.value))})]})]})}},96490:function(e,t,s){s.d(t,{E:function(){return r}});var o=s(37821);function r(e){var t,s;let{step:r,webhookHeaders:l,allSteps:n,currentStepIndex:i,onChange:a,onWebhookHeadersChange:d}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook URL *"}),(0,o.jsx)("input",{type:"text",value:r.webhook_url||"",onChange:e=>{e.stopPropagation(),a("webhook_url",e.target.value)},onKeyDown:e=>{e.stopPropagation(),"Enter"===e.key&&e.preventDefault()},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"https://example.com/webhook",autoComplete:"off"}),(0,o.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"The URL where the POST request will be sent with selected data."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook Headers (optional)"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Add custom headers to include in the webhook request (e.g., Authorization)."}),(0,o.jsxs)("div",{className:"space-y-2",children:[Object.entries(l).map((e,t)=>{let[s,r]=e;return(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{type:"text",value:s,onChange:e=>{e.stopPropagation();let t={...l};delete t[s],t[e.target.value]=r,d(t),a("webhook_headers",t)},onKeyDown:e=>e.stopPropagation(),placeholder:"Header name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",autoComplete:"off"}),(0,o.jsx)("input",{type:"text",value:r,onChange:e=>{e.stopPropagation();let t={...l,[s]:e.target.value};d(t),a("webhook_headers",t)},onKeyDown:e=>e.stopPropagation(),placeholder:"Header value",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",autoComplete:"off"}),(0,o.jsx)("button",{type:"button",onClick:()=>{let e={...l};delete e[s],d(e),a("webhook_headers",e)},className:"px-3 py-2 text-red-600 hover:text-red-700 text-sm",children:"Remove"})]},t)}),(0,o.jsx)("button",{type:"button",onClick:()=>{d({...l,"":""})},className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"+ Add Header"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Selection"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Choose which data to include in the webhook payload. All step outputs are included by default."}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,o.jsx)("input",{type:"checkbox",checked:(null===(t=r.webhook_data_selection)||void 0===t?void 0:t.include_submission)!==!1,onChange:e=>{a("webhook_data_selection",{...r.webhook_data_selection||{include_submission:!0,exclude_step_indices:[],include_job_info:!0},include_submission:e.target.checked})},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,o.jsx)("span",{className:"text-sm text-gray-900",children:"Include submission data"})]}),(0,o.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,o.jsx)("input",{type:"checkbox",checked:(null===(s=r.webhook_data_selection)||void 0===s?void 0:s.include_job_info)!==!1,onChange:e=>{a("webhook_data_selection",{...r.webhook_data_selection||{include_submission:!0,exclude_step_indices:[],include_job_info:!0},include_job_info:e.target.checked})},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,o.jsx)("span",{className:"text-sm text-gray-900",children:"Include job information"})]}),n.length>0&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exclude Step Outputs (optional)"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"All step outputs are included by default. Check steps to exclude from the payload."}),(0,o.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-3",children:n.map((e,t)=>{var s;if(t>=i)return null;let l=((null===(s=r.webhook_data_selection)||void 0===s?void 0:s.exclude_step_indices)||[]).includes(t);return(0,o.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,o.jsx)("input",{type:"checkbox",checked:l,onChange:e=>{let s=r.webhook_data_selection||{include_submission:!0,exclude_step_indices:[],include_job_info:!0},o=s.exclude_step_indices||[],l=e.target.checked?[...o,t]:o.filter(e=>e!==t);a("webhook_data_selection",{...s,exclude_step_indices:l})},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,o.jsxs)("span",{className:"text-sm text-gray-900",children:["Exclude: ",e.step_name||"Step ".concat(t+1)]})]},t)})})]})]})]})]})}},12700:function(e,t,s){s.d(t,{x:function(){return l}});var o=s(58078);function r(e,t){return e&&t?e.step_name===t.step_name&&e.step_description===t.step_description&&e.step_type===t.step_type&&e.model===t.model&&e.instructions===t.instructions&&e.webhook_url===t.webhook_url&&JSON.stringify(e.webhook_headers||{})===JSON.stringify(t.webhook_headers||{})&&JSON.stringify(e.webhook_data_selection||{})===JSON.stringify(t.webhook_data_selection||{})&&JSON.stringify(e.tools||[])===JSON.stringify(t.tools||[])&&e.tool_choice===t.tool_choice&&JSON.stringify((e.depends_on||[]).sort())===JSON.stringify((t.depends_on||[]).sort()):e===t}function l(e){let{step:t,index:s,onChange:l}=e,[n,i]=(0,o.useState)(t),[a,d]=(0,o.useState)(t.webhook_headers||{}),c=(0,o.useRef)(null),u=(0,o.useRef)(!1),p=(0,o.useRef)(t);(0,o.useEffect)(()=>{p.current=n},[n]),(0,o.useEffect)(()=>{if(u.current){u.current=!1,c.current=t,i(t),p.current=t,t.webhook_headers?d(t.webhook_headers):d({});return}!(c.current&&r(t,c.current))&&(r(t,p.current)||(i(t),p.current=t,t.webhook_headers?d(t.webhook_headers):d({})))},[t]);let m=(e,t)=>{u.current=!0,i(o=>{let r={...o,[e]:t};return p.current=r,c.current=r,l(s,r),r})};return{localStep:n,webhookHeaders:a,handleChange:m,handleWebhookHeadersChange:e=>{d(e),m("webhook_headers",e)}}}},97917:function(e,t,s){s.d(t,{t:function(){return r}});var o=s(58078);function r(e){let{step:t,onChange:s}=e,[r,l]=(0,o.useState)({display_width:1024,display_height:768,environment:"browser"});(0,o.useEffect)(()=>{let e=(t.tools||[]).find(e=>"object"==typeof e&&"computer_use_preview"===e.type||"computer_use_preview"===e);e&&"object"==typeof e&&l({display_width:e.display_width||1024,display_height:e.display_height||768,environment:e.environment||"browser"})},[t]);let n=e=>(t.tools||[]).some(t=>"string"==typeof t?t===e:t.type===e);return{computerUseConfig:r,isToolSelected:n,handleToolToggle:e=>{let o=t.tools||[];s("tools",n(e)?o.filter(t=>"string"==typeof t?t!==e:t.type!==e):"computer_use_preview"===e?[...o,{type:"computer_use_preview",display_width:r.display_width,display_height:r.display_height,environment:r.environment}]:[...o,e])},handleComputerUseConfigChange:(e,o)=>{let i={...r,[e]:o};l(i);let a=(t.tools||[]).map(e=>"object"==typeof e&&"computer_use_preview"===e.type?{...e,display_width:i.display_width,display_height:i.display_height,environment:i.environment}:e);n("computer_use_preview")&&!a.some(e=>"object"==typeof e&&"computer_use_preview"===e.type)&&a.push({type:"computer_use_preview",display_width:i.display_width,display_height:i.display_height,environment:i.environment}),s("tools",a)}}}}}]);