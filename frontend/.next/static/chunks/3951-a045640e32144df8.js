"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3951],{89267:function(t,e,r){r.d(e,{M:function(){return s}});class s extends Error{static fromAxiosError(t){if(t&&"object"==typeof t&&"response"in t){var e,r;let n,o;let i=null===(e=t.response)||void 0===e?void 0:e.status,a=null===(r=t.response)||void 0===r?void 0:r.data,c="An error occurred";return"string"==typeof a?c=a:a&&"object"==typeof a&&("message"in a&&"string"==typeof a.message&&(c=a.message),"code"in a&&"string"==typeof a.code&&(n=a.code),"details"in a&&"object"==typeof a.details&&(o=a.details)),new s(c,i,n,o)}return new s(t instanceof Error?t.message:"An unknown error occurred")}constructor(t,e,r,n){super(t),this.statusCode=e,this.code=r,this.details=n,this.name="ApiError",Object.setPrototypeOf(this,s.prototype)}}},63951:function(t,e,r){r.d(e,{hi:function(){return k}});class s{getToken(){let t=localStorage.getItem("access_token")||localStorage.getItem("id_token");if(t)return t;let e="4lb3j8kqfvfgkvfeb4h4naani5";if(!e)return null;let r=localStorage.getItem("CognitoIdentityServiceProvider.".concat(e,".LastAuthUser"));return r?t=localStorage.getItem("CognitoIdentityServiceProvider.".concat(e,".").concat(r,".accessToken"))||localStorage.getItem("CognitoIdentityServiceProvider.".concat(e,".").concat(r,".idToken")):null}}var n=r(39190),o=r(89267);class i{setupInterceptors(){this.client.interceptors.request.use(t=>{let e=this.tokenProvider.getToken();e&&(t.headers.Authorization="Bearer ".concat(e));let r=localStorage.getItem("impersonation_session_id");return r&&(t.headers["X-Session-Id"]=r),t},t=>Promise.reject(t)),this.client.interceptors.response.use(t=>t,t=>{var e;return(null===(e=t.response)||void 0===e?void 0:e.status)===401&&this.handleUnauthorized(t),Promise.reject(o.M.fromAxiosError(t))})}handleUnauthorized(t){var e;let r=t&&"object"==typeof t&&"response"in t?null===(e=t.response)||void 0===e?void 0:e.data:null,s="string"==typeof r?r:r?JSON.stringify(r):"Unauthorized";console.warn("API returned 401 Unauthorized:",{message:s,hasToken:!!this.tokenProvider.getToken()}),(!r||s.includes("Unauthorized")||s.includes("unauthorized")||s.includes("Invalid UserPoolId"))&&(console.warn("Authentication failed (token expired or invalid), clearing tokens and redirecting to login"),this.clearAuthTokens(),window.location.pathname.includes("/auth/login")||(window.location.href="/auth/login"))}clearAuthTokens(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("cognito_username");let t="4lb3j8kqfvfgkvfeb4h4naani5";if(t){let e=localStorage.getItem("CognitoIdentityServiceProvider.".concat(t,".LastAuthUser"));e&&(localStorage.removeItem("CognitoIdentityServiceProvider.".concat(t,".LastAuthUser")),localStorage.removeItem("CognitoIdentityServiceProvider.".concat(t,".").concat(e,".idToken")),localStorage.removeItem("CognitoIdentityServiceProvider.".concat(t,".").concat(e,".accessToken")),localStorage.removeItem("CognitoIdentityServiceProvider.".concat(t,".").concat(e,".refreshToken")))}}async get(t,e){return(await this.client.get(t,e)).data}async post(t,e,r){return(await this.client.post(t,e,r)).data}async put(t,e,r){return(await this.client.put(t,e,r)).data}async delete(t,e){return(await this.client.delete(t,e)).data}constructor(t){this.tokenProvider=t,this.client=n.Z.create({baseURL:"http://localhost:3001",headers:{"Content-Type":"application/json"},timeout:3e5}),this.setupInterceptors()}}class a extends i{async getWorkflows(t){return this.get("/admin/workflows",{params:t})}async getWorkflow(t){return this.get("/admin/workflows/".concat(t))}async createWorkflow(t){return this.post("/admin/workflows",t)}async updateWorkflow(t,e){return this.put("/admin/workflows/".concat(t),e)}async deleteWorkflow(t){return this.delete("/admin/workflows/".concat(t))}async generateWorkflowWithAI(t){return this.post("/admin/workflows/generate-with-ai",{description:t.description,model:t.model||"gpt-4o",webhook_url:t.webhook_url})}async getWorkflowGenerationStatus(t){return this.get("/admin/workflows/generation-status/".concat(t))}async refineWorkflowInstructions(t,e){return this.post("/admin/workflows/".concat(t,"/refine-instructions"),{current_instructions:e.current_instructions,edit_prompt:e.edit_prompt,model:e.model||"gpt-4o"})}async refineInstructions(t){return this.post("/admin/workflows/refine-instructions",{current_instructions:t.current_instructions,edit_prompt:t.edit_prompt,model:t.model||"gpt-4o"})}async generateStepWithAI(t,e){return this.post("/admin/workflows/".concat(t,"/ai-step"),e)}async editWorkflowWithAI(t,e){return this.post("/admin/workflows/".concat(t,"/ai-edit"),e)}constructor(t){super(t)}}class c extends i{async getForms(t){return this.get("/admin/forms",{params:t})}async getForm(t){return this.get("/admin/forms/".concat(t))}async createForm(t){return this.post("/admin/forms",t)}async updateForm(t,e){return this.put("/admin/forms/".concat(t),e)}async deleteForm(t){return this.delete("/admin/forms/".concat(t))}async generateFormCSS(t){return this.post("/admin/forms/generate-css",{form_fields_schema:t.form_fields_schema,css_prompt:t.css_prompt,model:t.model||"gpt-4o"})}async refineFormCSS(t){return this.post("/admin/forms/refine-css",{current_css:t.current_css,css_prompt:t.css_prompt,model:t.model||"gpt-4o"})}constructor(t){super(t)}}class l extends i{async getTemplates(t){return this.get("/admin/templates",{params:t})}async getTemplate(t){return this.get("/admin/templates/".concat(t))}async createTemplate(t){return this.post("/admin/templates",t)}async updateTemplate(t,e){return this.put("/admin/templates/".concat(t),e)}async deleteTemplate(t){return this.delete("/admin/templates/".concat(t))}async generateTemplateWithAI(t){return this.post("/admin/templates/generate",{description:t.description,model:t.model||"gpt-4o"})}async refineTemplateWithAI(t){return this.post("/admin/templates/refine",{current_html:t.current_html,edit_prompt:t.edit_prompt,model:t.model||"gpt-4o"})}constructor(t){super(t)}}class u extends i{async getJobs(t){let e={};return(null==t?void 0:t.status)&&(e.status=t.status),(null==t?void 0:t.workflow_id)&&(e.workflow_id=t.workflow_id),(null==t?void 0:t.limit)&&(e.limit=t.limit.toString()),(null==t?void 0:t.offset)!==void 0&&(e.offset=t.offset.toString()),this.get("/admin/jobs",{params:e})}async getJob(t){return this.get("/admin/jobs/".concat(t))}async resubmitJob(t){return this.post("/admin/jobs/".concat(t,"/resubmit"))}async rerunStep(t,e){return this.post("/admin/jobs/".concat(t,"/rerun-step"),{step_index:e})}async quickEditStep(t,e,r,s){return this.post("/admin/jobs/".concat(t,"/quick-edit-step"),{step_order:e,user_prompt:r,save:!0===s})}async getExecutionSteps(t){return this.get("/admin/jobs/".concat(t,"/execution-steps"))}async getJobDocument(t){return(await this.client.get("/admin/jobs/".concat(t,"/document"),{responseType:"text"})).data}async getJobDocumentBlobUrl(t){let e=new Blob([await this.getJobDocument(t)],{type:"text/html"});return URL.createObjectURL(e)}constructor(t){super(t)}}class d extends i{async getArtifacts(t){return this.get("/admin/artifacts",{params:t})}async getArtifact(t){return this.get("/admin/artifacts/".concat(t))}async getArtifactContent(t){return(await this.client.get("/admin/artifacts/".concat(t,"/content"),{responseType:"text"})).data}constructor(t){super(t)}}class m extends i{async getSubmissions(t){return this.get("/admin/submissions",{params:t})}async getSubmission(t){return this.get("/admin/submissions/".concat(t))}constructor(t){super(t)}}class g extends i{async getNotifications(t){let e={};return t&&(e.unread_only="true"),this.get("/admin/notifications",{params:e})}async markNotificationRead(t){return this.put("/admin/notifications/".concat(t,"/read"))}async markAllNotificationsRead(){return this.put("/admin/notifications/read-all")}constructor(t){super(t)}}class h extends i{async getSettings(){return this.get("/admin/settings")}async updateSettings(t){return this.put("/admin/settings",t)}async updateOnboardingSurvey(t){return this.updateSettings({onboarding_survey_completed:!0,onboarding_survey_responses:t})}async updateOnboardingChecklist(t){return this.updateSettings({onboarding_checklist:t})}async regenerateWebhookToken(){return this.post("/admin/settings/webhook/regenerate")}async getWebhookUrl(){return this.get("/admin/settings/webhook")}constructor(t){super(t)}}class p extends i{async getAnalytics(t){return this.get("/admin/analytics",{params:t})}constructor(t){super(t)}}class f extends i{async getUsage(t,e){let r={};return t&&(r.start_date=t),e&&(r.end_date=e),this.get("/admin/billing/usage",{params:r})}constructor(t){super(t)}}class y extends i{async getFolders(t){let e=new URLSearchParams;(null==t?void 0:t.limit)&&e.append("limit",String(t.limit));let r="/admin/folders".concat(e.toString()?"?".concat(e.toString()):"");return this.get(r)}async getFolder(t){return this.get("/admin/folders/".concat(t))}async createFolder(t){return this.post("/admin/folders",t)}async updateFolder(t,e){return this.put("/admin/folders/".concat(t),e)}async deleteFolder(t){return this.delete("/admin/folders/".concat(t))}constructor(t){super(t)}}class w extends i{async get(t,e){return super.get(t,e)}async post(t,e,r){return super.post(t,e,r)}async put(t,e,r){return super.put(t,e,r)}async delete(t,e){return super.delete(t,e)}async getWorkflows(t){return this.workflows.getWorkflows(t)}async getWorkflow(t){return this.workflows.getWorkflow(t)}async createWorkflow(t){return this.workflows.createWorkflow(t)}async updateWorkflow(t,e){return this.workflows.updateWorkflow(t,e)}async deleteWorkflow(t){return this.workflows.deleteWorkflow(t)}async getForms(t){return this.forms.getForms(t)}async getForm(t){return this.forms.getForm(t)}async createForm(t){return this.forms.createForm(t)}async updateForm(t,e){return this.forms.updateForm(t,e)}async deleteForm(t){return this.forms.deleteForm(t)}async getTemplates(t){return this.templates.getTemplates(t)}async getTemplate(t){return this.templates.getTemplate(t)}async createTemplate(t){return this.templates.createTemplate(t)}async updateTemplate(t,e){return this.templates.updateTemplate(t,e)}async deleteTemplate(t){return this.templates.deleteTemplate(t)}async getJobs(t){return this.jobs.getJobs(t)}async getJob(t){return this.jobs.getJob(t)}async resubmitJob(t){return this.jobs.resubmitJob(t)}async rerunStep(t,e){return this.jobs.rerunStep(t,e)}async quickEditStep(t,e,r,s){return this.jobs.quickEditStep(t,e,r,s)}async getExecutionSteps(t){return this.jobs.getExecutionSteps(t)}async getJobDocument(t){return this.jobs.getJobDocument(t)}async getJobDocumentBlobUrl(t){return this.jobs.getJobDocumentBlobUrl(t)}async getArtifacts(t){return this.artifacts.getArtifacts(t)}async getArtifact(t){return this.artifacts.getArtifact(t)}async getArtifactContent(t){return this.artifacts.getArtifactContent(t)}async getSubmissions(t){return this.submissions.getSubmissions(t)}async getSubmission(t){return this.submissions.getSubmission(t)}async generateWorkflowWithAI(t){return this.workflows.generateWorkflowWithAI(t)}async getWorkflowGenerationStatus(t){return this.workflows.getWorkflowGenerationStatus(t)}async refineWorkflowInstructions(t,e){return this.workflows.refineWorkflowInstructions(t,e)}async refineInstructions(t){return this.workflows.refineInstructions(t)}async generateStepWithAI(t,e){return this.workflows.generateStepWithAI(t,e)}async editWorkflowWithAI(t,e){return this.workflows.editWorkflowWithAI(t,e)}async generateTemplateWithAI(t){return this.templates.generateTemplateWithAI(t)}async refineTemplateWithAI(t){return this.templates.refineTemplateWithAI(t)}async generateFormCSS(t){return this.forms.generateFormCSS(t)}async refineFormCSS(t){return this.forms.refineFormCSS(t)}async getNotifications(t){return this.notifications.getNotifications(t)}async markNotificationRead(t){return this.notifications.markNotificationRead(t)}async markAllNotificationsRead(){return this.notifications.markAllNotificationsRead()}async getSettings(){return this.settings.getSettings()}async updateSettings(t){return this.settings.updateSettings(t)}async getAnalytics(t){return this.analytics.getAnalytics(t)}async getUsage(t,e){return this.usage.getUsage(t,e)}async updateOnboardingSurvey(t){return this.settings.updateOnboardingSurvey(t)}async updateOnboardingChecklist(t){return this.settings.updateOnboardingChecklist(t)}async getFolders(t){return this.folders.getFolders(t)}async getFolder(t){return this.folders.getFolder(t)}async createFolder(t){return this.folders.createFolder(t)}async updateFolder(t,e){return this.folders.updateFolder(t,e)}async deleteFolder(t){return this.folders.deleteFolder(t)}constructor(t){super(t||new s),this.workflows=new a(this.tokenProvider),this.forms=new c(this.tokenProvider),this.templates=new l(this.tokenProvider),this.jobs=new u(this.tokenProvider),this.artifacts=new d(this.tokenProvider),this.submissions=new m(this.tokenProvider),this.notifications=new g(this.tokenProvider),this.settings=new h(this.tokenProvider),this.analytics=new p(this.tokenProvider),this.usage=new f(this.tokenProvider),this.folders=new y(this.tokenProvider)}}let k=new w}}]);