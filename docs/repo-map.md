# Repository Map

Last updated: 2025-12-02 (keep in sync when directories move or teams change).

## Directory Overview

| Path | Owner | Purpose | Entry points & hot spots |
| --- | --- | --- | --- |
| `backend/api` | Backend/API Guild | TypeScript Fastify API serving workflow + form endpoints. | `src/index.ts` bootstraps Fastify, `src/routes/index.ts` wires controllers, `src/services/workflow/*` owns AI + workflow orchestration logic, `src/utils/*.ts` houses shared helpers, `test-local.ts` boots a local server. |
| `backend/worker` | Workflow Automation Guild | Python worker/lambda that executes workflow jobs generated by the API. | `worker.py` (local entry), `lambda_handler.py` (AWS), `processor.py` orchestrates steps, `services/*.py` implement per-step tooling, `tests/test_*.py` cover e2e + unit flows. |
| `frontend` | Frontend Guild | Next.js dashboard + authoring UI for workflows, jobs, and settings. | `src/app` routes (App Router), `src/components` shared UI, `src/api` TS clients, `e2e/` Playwright specs, `next.config.js` + `tailwind.config.ts` for build tooling. |
| `infrastructure` | Platform/Infra Guild | AWS CDK stacks for API, worker, storage, monitoring, and auth. | `bin/app.ts` entry, `lib/*-stack.ts` define stacks, `lib/stepfunctions/job-processor-state-machine.ts` codifies workflow orchestration, `package.json` scripts run `cdk synth/deploy`. |
| `scripts` | Developer Productivity Guild | Operational + debugging scripts for jobs, deployments, artifact sync, and QA. | `deployment/` ship pipeline scripts, `jobs/` CLI helpers for job lifecycle, `testing/` automation harnesses, `lib/common.*` shared helpers. |
| `docs` | Enablement Guild | Living knowledge base for architecture, testing, deployment, and glossary. | `ARCHITECTURE.md`, `LOCAL_DEVELOPMENT.md`, `WEBHOOK_*` guides, `archive/` for retired initiatives, this `repo-map.md` for navigation. |
| `.github` | Platform/Infra Guild | GitHub Actions workflows for API deploys, CDK infra, frontend deploys, worker image builds. | `workflows/*.yml` (deploy + CI jobs). |
| `assets` | Product/Design Guild | Reference imagery for docs, dashboards, and release notes. | `.png` screenshots referenced by README/docs. |
| `plans` | PMO / Tech Leads | In-flight architecture & refactor plans authored for coordination. | `*.plan.md` canonicalizes goals; keep aligned with roadmap docs. |
| Root files (`*.md`, `*.sh`, `*.py`) | Shared | Operational entry points that do not fit into subprojects. | `deploy-*.sh`, `mrr.py`, `uv.lock`, etc. (testing docs now live under `docs/testing/`). |

## Legacy / Follow-Up Areas

- `backend/api/src/utils/` still centralizes generic helpers, but domain-specific workflow prompt/config utilities already moved under `src/services/workflow/`. Prefer importing from the service layer to avoid reintroducing tight couplings.
- `docs/archive/` retains historical refactor plans; migrate active items into `docs/` proper before editing so AI agents do not surface stale instructions.
- `scripts/` contains several near-duplicate job inspection utilities; consolidate around `scripts/jobs/*.py` variants when authoring new automation to keep the context footprint manageable.

## Usage Notes

1. When onboarding humans or AI agents, start with this map → jump to `docs/ARCHITECTURE.md` → open the relevant guild directory.
2. When moving files, update this map in the same PR so CI and assistants stay aware of the new ownership boundaries.
3. If a directory is deprecated or merged, log it in **Legacy / Follow-Up Areas** until fully removed.
